(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[129],{3117:function(e,t,a){"use strict";a.r(t);var n=a(12),r=a(26),l=a(0),o=a.n(l),s=a(71),c=a(8),i=a.n(c),d=a(19),m=a(6),u=a(1201),p=a(606),h=a(1159),b=a(224),E=a(568),g=a(758),f=a(766),v=a(95),O=a(68);var j=({todo:e={tag:[]},tagList:t,updateTodo:a})=>o.a.createElement(u.a,{className:"border-radius-0",elevation:1},o.a.createElement("div",{className:"flex items-center flex-wrap px-4 py-4"},o.a.createElement(O.a,{to:"/todo/list/".concat(e.id),className:"flex items-center flex-grow"},o.a.createElement(p.a,{className:"cursor-move"},"open_with"),o.a.createElement("div",{className:"ml-4"},o.a.createElement("p",{className:"mb-4"},e.title),o.a.createElement("p",{className:"mt-0 mb-3 text-muted"},e.note),e.tag.map((e,a)=>(t.find(t=>t.id===e)||{}).name?o.a.createElement(h.a,{key:a,className:"mr-3",label:t.find(t=>t.id===e).name}):null))),o.a.createElement("div",{className:"flex flex-wrap items-center"},o.a.createElement(b.a,{onClick:()=>a(Object(m.a)(Object(m.a)({},e),{},{important:!e.important}))},o.a.createElement(p.a,{color:e.important?"error":"inherit"},e.important?"error":"error_outline")),o.a.createElement(b.a,{onClick:()=>a(Object(m.a)(Object(m.a)({},e),{},{starred:!e.starred}))},o.a.createElement(p.a,{color:e.starred?"secondary":"inherit"},e.starred?"star":"star_outline")),o.a.createElement(v.p,{menuButton:o.a.createElement(b.a,null,o.a.createElement(p.a,null,"more_vert"))},o.a.createElement(E.a,null,o.a.createElement(g.a,{onChange:()=>a(Object(m.a)(Object(m.a)({},e),{},{done:!e.done})),control:o.a.createElement(f.a,{checked:e.done}),label:"Mark As ".concat(e.done?"Und":"D","one")})),o.a.createElement(E.a,null,o.a.createElement(g.a,{onChange:()=>a(Object(m.a)(Object(m.a)({},e),{},{read:!e.read})),control:o.a.createElement(f.a,{checked:e.read}),label:"Mark As ".concat(e.read?"Unr":"R","ead")})))))),x=a(2356),k=a(44),y=a.n(k);const C=e=>y.a.post("/api/todo/reorder",{todoList:e}),w=e=>y.a.post("/api/todo/update",{todo:e}),N=()=>y.a.get("/api/todo/tag"),D=e=>y.a.post("/api/todo/tag/add",{tag:e});var T=a(144),S=a(137);var _=({query:e})=>{const t=Object(l.useState)(!0),a=Object(n.a)(t,2),r=a[0],c=a[1],m=Object(l.useState)([]),h=Object(n.a)(m,2),g=h[0],f=h[1],O=Object(l.useState)([]),k=Object(n.a)(O,2),D=k[0],_=k[1],L=Object(l.useState)([]),z=Object(n.a)(L,2),A=z[0],B=z[1],M=Object(s.g)(),U=Object(l.useCallback)(Object(d.a)(i.a.mark((function e(){var t,a,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([y.a.get("/api/todo/all"),N()]);case 2:t=e.sent,a=Object(n.a)(t,2),l=a[0].data,o=a[1].data,r&&(B(l),f(l),_(o));case 7:case"end":return e.stop()}}),e)}))),[r]),P=Object(l.useCallback)(Object(S.debounce)(e=>{if(e=e.trim().toLowerCase()){let t=g.filter(t=>t.title.toLowerCase().match(e)||t.note.toLowerCase().match(e));""!==e&&B([...t])}},250),[g]);Object(l.useEffect)(()=>(U(),()=>c(!1)),[U]),Object(l.useEffect)(()=>{P(e)},[e,P]);const q=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n,l,o;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w(t);case 2:a=e.sent,n=a.data,r&&(l=g.map(e=>e.id===n.id?n:e),o=A.map(e=>e.id===n.id?n:e),f([...l]),B([...o]));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=(e,t,a)=>{const r=Array.from(e),l=r.splice(t,1),o=Object(n.a)(l,1)[0];return r.splice(a,0,o),r},R=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n,l;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.destination){e.next=2;break}return e.abrupt("return");case 2:return a=I(A,t.source.index,t.destination.index),e.next=5,C(a);case 5:n=e.sent,l=n.data,r&&(B(l),f(l));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V=(e,t)=>{if("all"!==e){let a=g.filter(a=>a[e]===t);B([...a])}else B([...g])},W=e=>{if("all"!==e){let t=g.filter(t=>t.tag.includes(e));B([...t])}else B([...g])};return o.a.createElement(u.a,{className:"todo relative m-sm-30"},o.a.createElement("div",{className:"todo-list__topbar bg-light-gray py-2 flex flex-wrap items-center justify-between"},o.a.createElement("div",null,o.a.createElement(v.p,{menuButton:o.a.createElement(b.a,null,o.a.createElement(p.a,null,"arrow_drop_down"))},o.a.createElement(E.a,{onClick:()=>V("all")},"All"),o.a.createElement(E.a,{onClick:()=>V("read",!0)},"Read"),o.a.createElement(E.a,{onClick:()=>V("read",!1)},"Unread"),o.a.createElement(E.a,{onClick:()=>V("done",!0)},"Done"),o.a.createElement(E.a,{onClick:()=>V("done",!1)},"Undone"),o.a.createElement(E.a,{onClick:()=>V("important",!0)},"Important"),o.a.createElement(E.a,{onClick:()=>V("important",!1)},"Unimportant"),o.a.createElement(E.a,{onClick:()=>V("starred",!0)},"Starred"),o.a.createElement(E.a,{onClick:()=>V("starred",!1)},"Unstarred")),o.a.createElement(v.p,{menuButton:o.a.createElement(b.a,null,o.a.createElement(p.a,null,"label"))},o.a.createElement(E.a,{className:"capitalize",onClick:()=>W("all")},"all"),D.map(e=>o.a.createElement(E.a,{key:e.id,className:"capitalize",onClick:()=>W(e.id)},e.name)))),o.a.createElement("div",{className:"pr-4"},o.a.createElement(T.a,{variant:"contained",color:"primary",onClick:()=>M.push("/todo/list/add")},"Create Todo"))),o.a.createElement("div",{className:"todo-list"},o.a.createElement(x.a,{onDragEnd:R},o.a.createElement(x.c,{droppableId:"droppable"},(e,t)=>o.a.createElement("div",Object.assign({},e.droppableProps,{ref:e.innerRef}),A.map((e,t)=>o.a.createElement(x.b,{key:e.id,draggableId:e.id,index:t},(a,n)=>o.a.createElement("div",Object.assign({ref:a.innerRef},a.draggableProps,a.dragHandleProps,{style:a.draggableProps.style}),o.a.createElement(j,{tagList:D,updateTodo:q,key:t,todo:e})))),e.placeholder)))))},L=a(2201),z=a(1128),A=a(46),B=a(69),M=a(2198),U=a(447),P=a(105),q=a(1198),I=a(426),R=a(269);var V=({open:e,handleClose:t})=>{const a=Object(l.useState)(!0),r=Object(n.a)(a,2),s=r[0],c=r[1],m=Object(l.useState)(""),u=Object(n.a)(m,2),p=u[0],h=u[1],b=Object(l.useState)([]),E=Object(n.a)(b,2),g=E[0],f=E[1],v=Object(l.useCallback)(Object(d.a)(i.a.mark((function e(){var t,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N();case 2:t=e.sent,a=t.data,s&&f(a);case 5:case"end":return e.stop()}}),e)}))),[s]);Object(l.useEffect)(()=>(v(),()=>c(!1)),[v]),Object(l.useEffect)(()=>()=>c(!1),[]);const O=e=>{"Enter"===e.key?j():h(e.target.value)},j=function(){var e=Object(d.a)(i.a.mark((function e(t){var a,n,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(""===p.trim()){e.next=6;break}return e.next=3,D({id:Object(R.c)(),name:p.trim()});case 3:a=e.sent,n=a.data,s&&((r=[...g]).push(n),f(r),h(""));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=Object(d.a)(i.a.mark((function e(t){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n={id:t,name:p},y.a.post("/api/todo/tag/delete",{tag:n});case 2:s&&(a=g.filter(e=>e.id!==t),f([...a]));case 3:case"end":return e.stop()}var n}),e)})));return function(t){return e.apply(this,arguments)}}();return o.a.createElement(q.a,{onClose:t,open:e,maxWidth:"xs"},o.a.createElement("div",{className:"px-4 py-6"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(I.a,{variant:"outlined",size:"small",onChange:O,onKeyDown:O,value:p,className:"flex-grow",label:"New tag*"}),o.a.createElement("div",null,o.a.createElement(T.a,{onClick:j,className:"",variant:"contained",color:"primary"},"Add"))),o.a.createElement("div",{className:"pt-4"},g.map((e,t)=>o.a.createElement("div",{className:"flex items-center justify-between my-2",key:e.id},o.a.createElement("span",null,t+1),o.a.createElement("span",{className:"capitalize"},e.name),o.a.createElement(T.a,{onClickCapture:()=>x(e.id),className:"bg-error",variant:"contained"},"Delete")))),o.a.createElement("div",{className:"pt-4 text-right"},o.a.createElement(T.a,{onClick:t,variant:"outlined",color:"secondary"},"Close"))))};class W extends l.Component{constructor(...e){super(...e),this.state={todo:{title:"",note:"",done:!1,read:!1,starred:!1,important:!1,startDate:new Date,dueDate:new Date,tag:[]},tagList:[],shouldOpenTagDialog:!1},this.addNewTodo=()=>{let e=this.state.tagList.length+1;var t;(t=Object(m.a)(Object(m.a)({},this.state.todo),{},{id:e}),y.a.post("/api/todo/add",{todo:t})).then(()=>{this.props.history.push("/todo/list")})},this.updateTodo=e=>{w(e),this.setState({todo:Object(m.a)(Object(m.a)({},this.state.todo),e)})},this.reloadTagList=()=>{N().then(({data:e})=>{this.setState({tagList:[...e]})})},this.addTagInTodo=e=>{let t=this.state.todo.tag;t.includes(e)||(t.push(e),this.setState({todo:Object(m.a)(Object(m.a)({},this.state.todo),{},{tag:t})}))},this.handleTagDelete=e=>{let t=this.state.todo.tag,a=void 0===t?[]:t;a=a.filter(t=>t!==e),this.setState({todo:Object(m.a)(Object(m.a)({},this.state.todo),{},{tag:[...a]})},()=>w(Object(m.a)({},this.state.todo)))},this.handleTodoDelete=()=>{var e;(e=Object(m.a)({},this.state.todo),y.a.post("/api/todo/delete",{todo:e})).then(()=>{this.props.history.push("/todo/list")})},this.handleChange=e=>{e.persist(),this.setState({todo:Object(m.a)(Object(m.a)({},this.state.todo),{},{[e.target.name]:e.target.value})})},this.handleDateChange=(e,t)=>{this.setState(this.setState({todo:Object(m.a)(Object(m.a)({},this.state.todo),{},{[e]:t})}))},this.handleSubmit=e=>{"add"===this.props.match.params.id?this.addNewTodo():w(Object(m.a)({},this.state.todo)).then(()=>{this.props.history.push("/todo/list")})},this.handleTagDialogToggle=()=>{this.setState({shouldOpenTagDialog:!this.state.shouldOpenTagDialog})}}componentDidMount(){let e=this.props.match.params.id;N().then(({data:t})=>{"add"!==e?(e=>y.a.get("/api/todo",{data:e}))(e).then(({data:e})=>{e?this.setState({todo:Object(m.a)({},e),tagList:[...t]}):this.props.history.push("/todo/list")}):this.setState({tagList:t})})}render(){let e=this.state.todo,t=e.title,a=e.note,n=e.done,r=e.read,l=e.starred,s=e.important,c=e.startDate,i=e.dueDate,d=e.tag,j=void 0===d?[]:d,x=this.state.tagList;return o.a.createElement(u.a,{className:"todo-editor relative m-sm-30"},o.a.createElement("div",{className:"editor__topbar bg-light-gray py-2 flex flex-wrap items-center justify-between"},o.a.createElement("div",{className:"flex flex-wrap items-center"},o.a.createElement(O.a,{to:"/todo/list"},o.a.createElement(b.a,null,o.a.createElement(p.a,null,"arrow_back"))),o.a.createElement(L.a,{smDown:!0},o.a.createElement(g.a,{className:"ml-2",onChange:()=>this.updateTodo(Object(m.a)(Object(m.a)({},this.state),{},{done:!n})),control:o.a.createElement(f.a,{checked:n}),label:"Mark As ".concat(n?"Und":"D","one")}))),o.a.createElement("div",{className:"flex flex-wrap"},o.a.createElement(z.a,{title:"Mark As ".concat(r?"Unr":"R","ead"),fontSize:"large"},o.a.createElement(b.a,{onClick:()=>this.updateTodo(Object(m.a)(Object(m.a)({},this.state),{},{read:!r}))},o.a.createElement(p.a,null,r?"drafts":"markunread"))),o.a.createElement(z.a,{title:"Mark As ".concat(s?"Uni":"I","mportant"),fontSize:"large"},o.a.createElement(b.a,{onClick:()=>this.updateTodo(Object(m.a)(Object(m.a)({},this.state),{},{important:!s}))},o.a.createElement(p.a,{color:s?"error":"inherit"},s?"error":"error_outline"))),o.a.createElement(z.a,{title:"Mark As ".concat(l?"Uns":"S","tarred"),fontSize:"large"},o.a.createElement(b.a,{onClick:()=>this.updateTodo(Object(m.a)(Object(m.a)({},this.state),{},{starred:!l}))},o.a.createElement(p.a,{color:l?"secondary":"inherit"},l?"star":"star_outline"))),o.a.createElement(L.a,{smDown:!0},o.a.createElement(z.a,{title:"Manage tags",fontSize:"large"},o.a.createElement(b.a,{onClick:this.handleTagDialogToggle},o.a.createElement(p.a,null,"library_add")))),o.a.createElement(v.p,{menuButton:o.a.createElement(z.a,{title:"Add tags",fontSize:"large"},o.a.createElement(b.a,null,o.a.createElement(p.a,null,"label")))},this.state.tagList.map(e=>o.a.createElement(E.a,{className:"capitalize",key:e.id,onClick:()=>this.addTagInTodo(e.id)},e.name))),o.a.createElement(z.a,{title:"Delete",fontSize:"large"},o.a.createElement(b.a,{onClick:this.handleTodoDelete},o.a.createElement(p.a,null,"delete_outline"))))),o.a.createElement("div",{className:"editor__form p-4"},j.length?o.a.createElement("div",{className:"mb-4"},j.map(e=>{let t=(x.find(t=>t.id===e)||{}).name;return t?o.a.createElement(h.a,{className:"capitalize mr-2",key:e,label:t,onDelete:()=>this.handleTagDelete(e)}):null})):null,o.a.createElement(P.ValidatorForm,{ref:"form",onSubmit:this.handleSubmit,onError:e=>null},o.a.createElement(P.TextValidator,{className:"mb-4 w-full",label:"Title*",onChange:this.handleChange,type:"text",name:"title",value:t,validators:["required"],errorMessages:["this field is required"]}),o.a.createElement(P.TextValidator,{className:"mb-4 w-full",label:"Put your notes*",onChange:this.handleChange,type:"text",name:"note",multiline:!0,value:a,validators:["required"],errorMessages:["this field is required"]}),o.a.createElement("div",{className:"mb-4"},o.a.createElement(B.a,{utils:U.a},o.a.createElement(A.a,{container:!0,spacing:2},o.a.createElement(A.a,{item:!0,lg:3,md:4,sm:12,xs:12},o.a.createElement(M.b,{margin:"none",id:"mui-pickers-date",label:"Start Date*",inputVariant:"standard",type:"text",autoOk:!0,value:new Date(c),onChange:e=>this.handleDateChange("startDate",e),KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0})),o.a.createElement(A.a,{item:!0,lg:3,md:4,sm:12,xs:12},o.a.createElement(M.b,{margin:"none",id:"mui-pickers-date",label:"End Date*",inputVariant:"standard",type:"text",autoOk:!0,value:new Date(i),onChange:e=>this.handleDateChange("dueDate",e),KeyboardButtonProps:{"aria-label":"change date"},fullWidth:!0}))))),o.a.createElement(O.a,{to:"/todo/list"},o.a.createElement(T.a,{variant:"outlined",color:"secondary",className:"mr-4",type:"submit"},"cancel")),o.a.createElement(T.a,{color:"primary",variant:"contained",type:"submit"},"save"))),o.a.createElement(V,{reloadTagList:this.reloadTagList,open:this.state.shouldOpenTagDialog,handleClose:this.handleTagDialogToggle}))}}var H=W,K=a(110),J=a(3);const F=Object(K.a)(e=>{e.palette;let t=Object(r.a)(e,["palette"]);return{searchBoxHolder:{height:"calc(220px - 94px + 30px)",[t.breakpoints.down("sm")]:{height:"calc(220px - 94px -16px + 30px)"}},searchBox:{width:"calc(100% - 60px)",[t.breakpoints.down("sm")]:{width:"calc(100% - 32px)"}},todoContent:{marginTop:-94}}});t.default=()=>{const e=Object(l.useState)(""),t=Object(n.a)(e,2),a=t[0],r=t[1],c=F();return o.a.createElement("div",null,o.a.createElement("div",{className:"h-220 bg-primary"},o.a.createElement("div",{className:Object(J.default)("flex-column items-center justify-center",c.searchBoxHolder)},o.a.createElement("div",{className:c.searchBox},o.a.createElement(I.a,{name:"query",value:a,variant:"outlined",size:"medium",fullWidth:!0,InputProps:{startAdornment:o.a.createElement(p.a,{className:"mr-3"},"search"),style:{borderRadius:300,background:"white",outline:"none"}},onChange:e=>{r(e.target.value)}})))),o.a.createElement("div",{className:c.todoContent},o.a.createElement(s.d,null,o.a.createElement(s.b,{path:"/todo/list/:id",component:H}),o.a.createElement(s.b,{exact:!0,path:"/todo/list",render:()=>o.a.createElement(_,{query:a})}))))}}}]);