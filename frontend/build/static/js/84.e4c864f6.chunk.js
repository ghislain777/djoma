(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[84],{3141:function(e,a,t){"use strict";t.r(a);var n=t(6),l=t(12),r=t(26),c=(t(2893),t(2894),t(0)),i=t.n(c),s=t(144),o=t(3017),m=t(2895),d=t.n(m),u=t(2516),b=t(1128),v=t(224),p=t(606),E=t(110),h=t(3);const f=Object(E.a)(e=>{e.palette,Object(r.a)(e,["palette"]);return{header:{borderTopRightRadius:6,borderTopLeftRadius:6}}}),g={month:{name:"Month",icon:"view_module"},week:{name:"Week",icon:"view_week"},work_week:{name:"Work week",icon:"view_array"},day:{name:"Day",icon:"view_day"},agenda:{name:"Agenda",icon:"view_agenda"}};var w=({views:e,view:a,label:t,onView:n,onNavigate:l})=>{const r=f();return i.a.createElement("div",{className:Object(h.default)("flex py-1 justify-around bg-primary",r.header)},i.a.createElement("div",{className:"flex justify-center"},i.a.createElement(b.a,{title:"Previous"},i.a.createElement(v.a,{onClick:()=>l(u.navigate.PREVIOUS)},i.a.createElement(p.a,{className:"text-white"},"chevron_left"))),i.a.createElement(b.a,{title:"Today"},i.a.createElement(v.a,{onClick:()=>l(u.navigate.TODAY)},i.a.createElement(p.a,{className:"text-white"},"today"))),i.a.createElement(b.a,{title:"Next"},i.a.createElement(v.a,{onClick:()=>l(u.navigate.NEXT)},i.a.createElement(p.a,{className:"text-white"},"chevron_right")))),i.a.createElement("div",{className:"flex items-center"},i.a.createElement("h6",{className:"m-0 text-white"},t)),i.a.createElement("div",{className:"flex"},(()=>{if(e.length>1)return e.map(e=>i.a.createElement(b.a,{title:g[e].name,key:e},i.a.createElement("div",null,i.a.createElement(v.a,{"aria-label":e,onClick:()=>n(e),disabled:a===e},i.a.createElement(p.a,{className:"text-white"},g[e].icon)))))})()))},x=t(35),O=t(95),j=t(44),y=t.n(j);const N=e=>y.a.post("/api/calendar/events/update",e);var k=t(1198),C=t(46),S=t(105),D=t(69),T=t(2205),V=t(447);var M=({event:e={},open:a,handleClose:t})=>{const r=Object(c.useState)(e),o=Object(l.a)(r,2),m=o[0],d=o[1],u=e=>{d(Object(n.a)(Object(n.a)({},m),{},{[e.target.name]:e.target.value}))},b=(e,a)=>{d(Object(n.a)(Object(n.a)({},m),{},{[a]:e}))},E=()=>{let e=Math.random().toString();return e.substr(2,e.length-1)};let h=m.title,f=m.start,g=m.end,w=m.location,x=m.note;return i.a.createElement(k.a,{onClose:t,open:a,maxWidth:"xs",fullWidth:!0},i.a.createElement("div",{className:"flex justify-between items-center pl-4 pr-2 py-2 bg-primary"},i.a.createElement("h4",{className:"m-0 text-white"},"Add Events"),i.a.createElement(v.a,{onClick:t},i.a.createElement(p.a,{className:"text-white"},"clear"))),i.a.createElement("div",{className:"p-4"},i.a.createElement(S.ValidatorForm,{onSubmit:()=>{m.id?N(Object(n.a)({},m)).then(()=>{t()}):(e=>y.a.post("/api/calendar/events/add",e))(Object(n.a)({id:E()},m)).then(()=>{t()})}},i.a.createElement(S.TextValidator,{className:"mb-6 w-full",label:"Title",onChange:u,type:"text",name:"title",value:h||"",validators:["required"],errorMessages:["this field is required"]}),i.a.createElement(C.a,{container:!0,spacing:4},i.a.createElement(C.a,{item:!0,sm:6,xs:12},i.a.createElement(D.a,{utils:V.a},i.a.createElement(T.a,{margin:"none",id:"start-date",label:"Start date",inputVariant:"standard",type:"text",autoOk:!0,value:f||"",fullWidth:!0,onChange:e=>b(e,"start")}))),i.a.createElement(C.a,{item:!0,sm:6,xs:12},i.a.createElement(D.a,{utils:V.a},i.a.createElement(T.a,{margin:"none",id:"end-date",label:"End date",inputVariant:"standard",type:"text",autoOk:!0,value:g||"",fullWidth:!0,onChange:e=>b(e,"end")})))),i.a.createElement("div",{className:"py-2"}),i.a.createElement(S.TextValidator,{className:"mb-6 w-full",label:"Location",onChange:u,type:"text",name:"location",value:w||"",validators:["required"],errorMessages:["this field is required"]}),i.a.createElement(S.TextValidator,{className:"mb-9 w-full",label:"Note",onChange:u,type:"text",name:"note",value:x||"",rowsMax:2,multiline:!0,validators:["required"],errorMessages:["this field is required"]}),i.a.createElement("div",{className:"flex justify-between items-center"},i.a.createElement(s.a,{variant:"contained",color:"primary",type:"submit"},"Save"),i.a.createElement(s.a,{onClick:()=>{m.id&&(e=>y.a.post("/api/calendar/events/delete",e))(m).then(()=>{t()})}},i.a.createElement(p.a,{className:"mr-2 align-middle"},"delete"),"Delete")))))},_=t(2906),W=t.n(_);const q=Object(E.a)(e=>{e.palette,Object(r.a)(e,["palette"]);return{calendar:{"& .rbc-event":{background:"rgba(var(--primary),1) !important"},"& .rbc-selected":{background:"rgba(var(--secondary),1) !important"},"& .rbc-calendar":{height:"auto",flexGrow:1},"& .rbc-header":{padding:"12px 16px !important","& a":{paddingBottom:"8px !important"},"& span":{fontSize:"15px !important",fontWeight:500}}}}}),A=Object(o.c)(W.a),R=d()(o.a);let z=Object.keys(o.b).map(e=>o.b[e]);a.default=()=>{const e=Object(c.useState)([]),a=Object(l.a)(e,2),t=a[0],m=a[1],d=Object(c.useState)(null),u=Object(l.a)(d,2),b=u[0],v=u[1],p=Object(c.useState)(!1),E=Object(l.a)(p,2),f=E[0],g=E[1],j=Object(c.useRef)(null),k=q(),C=()=>{y.a.get("/api/calendar/events/all").then(e=>e.data).then(e=>{var a;e=null===(a=e)||void 0===a?void 0:a.map(e=>Object(n.a)(Object(n.a)({},e),{},{start:new Date(e.start),end:new Date(e.end)})),m(e)})},S=e=>{N(e).then(()=>{C()})},D=e=>{let a=e.action,t=Object(r.a)(e,["action"]);"doubleClick"===a&&(v(t),g(!0))};return Object(c.useEffect)(()=>{C()},[]),i.a.createElement("div",{className:"m-sm-30"},i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(O.b,{routeSegments:[{name:"Calendar"}]})),i.a.createElement(s.a,{className:"mb-4",variant:"contained",color:"secondary",onClick:()=>D({action:"doubleClick",start:new Date,end:new Date})},"Add Event"),i.a.createElement("div",{className:Object(h.default)("h-full-screen flex-column",k.calendar)},i.a.createElement("div",{ref:j}),i.a.createElement(R,{selectable:!0,localizer:A,events:t,onEventDrop:e=>{S(e)},resizable:!0,onEventResize:S,defaultView:o.b.MONTH,defaultDate:new Date,startAccessor:"start",endAccessor:"end",views:z,step:60,showMultiDayTimes:!0,components:{toolbar:e=>j.current?x.createPortal(i.a.createElement(w,e),j.current):i.a.createElement("div",null,"Header component not found")},onSelectEvent:e=>{(e=>{v(e),g(!0)})(e)},onSelectSlot:e=>D(e)})),f&&i.a.createElement(M,{handleClose:()=>{g(!1),C()},open:f,event:b}))}}}]);