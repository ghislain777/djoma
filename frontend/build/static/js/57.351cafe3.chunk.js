(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[57],{2403:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return m})),a.d(t,"d",(function(){return p}));var r=a(8),n=a.n(r),o=a(19),i=a(17);function c(e,t,a,r){return s.apply(this,arguments)}function s(){return(s=Object(o.a)(n.a.mark((function e(t,a,r,o){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,i.b.get("/typedecolis?itemsPerPage="+a+"&page="+t+"&id="+r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.post("/typedecolis",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function m(e){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.put("/typedecolis/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.b.delete("/typedecolis/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},3178:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(12),o=a(0),i=a.n(o),c=a(229),s=a.n(c),l=a(231),u=a(224),m=a(606),d=a(64),p=a(1241),b=a(144),h=a(1201),g=a(46),v=a(79),y=a(228),f=a(783),E=a(2403),j=a(73),O=a(84),w=a(32),C=a(117),P=(a(131),a(368),a(369),a(367),a(60));const S=v.b().shape({nom:v.c().required("Le champs Nom est requis"),description:v.c().required("Le champs Description est requis"),photo:v.c().required("Le champs Photo est requis")});function T({id:e,letypedecoli:t,handleFermeture:a,action:c}){const s=Object(w.useQueryClient)(),l=Object(w.useMutation)(E.a,{onSuccess:()=>{s.invalidateQueries("Typedecolis"),x({message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0})},onError:()=>{s.invalidateQueries("Typedecolis"),x({message:"Echec lors de l op\xe9ration",open:!0,severity:"error",automaticClose:!0})}}),u=Object(w.useMutation)(E.c,{onSuccess:()=>{s.invalidateQueries("Typedecolis"),x({message:"Mise \xe0 jour r\xe9ussie",open:!0,severity:"success",automaticClose:!0})},onError:()=>{s.invalidateQueries("Typedecolis"),x({message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0})}}),p=Object(o.useState)(t),h=Object(n.a)(p,2),v=h[0],P=(h[1],Object(o.useState)({severity:"severity",message:"",open:!1,automaticClose:!0})),T=Object(n.a)(P,2),k=T[0],x=T[1],D=Object(j.c)({resolver:Object(y.yupResolver)(S)}),N=D.control,Q=D.handleSubmit,L=D.errors,R=(D.reset,e=>{let t=Object(r.a)(Object(r.a)({},v),e);v?u.mutate(Object(r.a)({},t)):l.mutate(Object(r.a)({},t))});return i.a.createElement("div",null,i.a.createElement(O.a,{message:k.message,severity:k.severity,open:k.open,handleAlertClose:k.automaticClose?a:()=>x(Object(r.a)(Object(r.a)({},k),{},{open:!1}))}),i.a.createElement("form",{onSubmit:Q(R)},i.a.createElement(g.a,{container:!0,spacing:4,direction:"column"},i.a.createElement(g.a,{item:!0},i.a.createElement(C.a,{id:"nom",nom:"nom",label:"Nom",valeur:null===v||void 0===v?void 0:v.nom,control:N,error:L.nom})),i.a.createElement(g.a,{item:!0},i.a.createElement(C.a,{id:"description",nom:"description",label:"Description",valeur:null===v||void 0===v?void 0:v.description,control:N,error:L.description})),i.a.createElement(g.a,{item:!0},i.a.createElement(C.a,{id:"photo",nom:"photo",label:"Photo",valeur:null===v||void 0===v?void 0:v.photo,control:N,error:L.photo})),i.a.createElement(g.a,{item:!0},i.a.createElement(g.a,{container:!0,alignItems:"center",justify:"space-between"},i.a.createElement(g.a,{item:!0},i.a.createElement(b.a,{color:"primary",variant:"contained",type:"submit",onClick:Q(R)},u.isLoading||l.isLoading?i.a.createElement(f.a,{color:"inherit"}):i.a.createElement(m.a,null,"send"),i.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===c?i.a.createElement(d.a,null,"Enregistrer"):i.a.createElement(d.a,null,"Mettre \xe0 jour")))),i.a.createElement(g.a,{item:!0},i.a.createElement(b.a,{variant:"outlined",color:"secondary",onClick:function(){a()}},"Annuler")))))))}var k=a(204),x=a(230),D=a(300);a(443),a(17);t.default=()=>{const e=Object(o.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),t=Object(n.a)(e,2),a=t[0],c=t[1],v=Object(w.useQueryClient)(),y=Object(w.useQuery)(["Typedecolis",a.page,a.rowsPerPage,a.recherche,a.filtre],()=>Object(E.b)(a.page,a.rowsPerPage,a.recherche,a.filtre),{keepPreviousData:!0}),f=y.isLoading,j=(y.isFetching,y.isError),C=y.error,S=y.data,N=Object(w.useMutation)(E.d,{onSuccess:()=>{_({message:"Suppr\xe9ssion r\xe9ussi",open:!0,severity:"success"})},onError:()=>{_({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{v.invalidateQueries("Typedecolis")}}),Q=Object(o.useState)(null),L=Object(n.a)(Q,2),R=L[0],q=L[1],A=Object(o.useState)({mode:"affichage",action:"ajout",affichageTable:!0}),M=Object(n.a)(A,2),z=M[0],B=M[1],F=Object(o.useState)({severity:"severity",message:"",open:!1,handleCloseAlert:()=>Z()}),I=Object(n.a)(F,2),J=I[0],_=I[1],Y=Object(o.useState)("Liste des typedecolis"),G=Object(n.a)(Y,2),H=G[0],K=G[1],U=Object(o.useState)(!1),V=Object(n.a)(U,2),W=V[0],X=V[1],Z=()=>{_(Object(r.a)(Object(r.a)({},O.a),{},{open:!1}))},$=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"nom",label:"Nom",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"description",label:"Description",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"photo",label:"Photo",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,sort:!1,customBodyRender:(e,t,a)=>i.a.createElement("div",null,i.a.createElement(u.a,{size:"small",onClick:()=>{(e=>{B({mode:"edition",action:"misajour",affichageTable:!1}),q(e),K("Mise \xe0 jour de typedecoli")})({id:t.rowData[0],nom:t.rowData[1],description:t.rowData[2],photo:t.rowData[3]})}},i.a.createElement(m.a,{color:"primary"},"edit")),i.a.createElement(u.a,{size:"small",onClick:()=>(e=>{X(!0),q(e)})({id:t.rowData[0]})},i.a.createElement(m.a,{color:"error"},"delete")),i.a.createElement(u.a,{size:"small",onClick:()=>(t.rowData[0],void console.log("affichage de details"))},i.a.createElement(m.a,null,"arrow_right_alt")))}}];return i.a.createElement("div",{className:"m-sm-30"},i.a.createElement(O.a,{message:J.message,severity:J.severity,open:J.open,handleAlertClose:Z}),i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(k.a,{routeSegments:[{name:"Types de colis"}]})),i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(d.a,{variant:"h4"},H)),"affichage"===z.mode?i.a.createElement(p.a,{in:z.affichageTable,direction:"right",unmountOnExit:!0},i.a.createElement("div",null,i.a.createElement(b.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>(B({mode:"edition",action:"ajout",affichageTable:!1}),q(null),void K("Nouveau type"))},"Nouveau type"),f?i.a.createElement(P.a,{message:"Chargement des donn\xe9es",type:"info"}):j?i.a.createElement(P.a,{message:"Erreur lors du chargement des donn\xe9es::"+C,type:"error"}):i.a.createElement(D.a,{tag:"div",blocking:!1},i.a.createElement(s.a,{title:H,data:S["hydra:member"],columns:$,options:Object(r.a)(Object(r.a)({},l.a),{},{serverSide:!0,count:S["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:a.rowsPerPage,onChangePage:e=>(e=>{c(Object(r.a)(Object(r.a)({},a),{},{page:e})),v.invalidateQueries("Typedecolis")})(e),onChangeRowsPerPage:e=>(e=>{c(Object(r.a)(Object(r.a)({},a),{},{rowsPerPage:e})),console.log("idbre de ligne par page:"+e),v.invalidateQueries("Typedecolis")})(e),onSearchChange:e=>(e=>{var t;c(Object(r.a)(Object(r.a)({},a),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),v.invalidateQueries("Typedecolis")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})),i.a.createElement(h.a,{className:"w-full overflow-auto",elevation:8},i.a.createElement(x.a,{open:W,onConfirmDialogClose:()=>{X(!1)},onYesClick:()=>{X(!1),N.mutate(R)},text:"Confirmez la suppression de "+(null===R||void 0===R?void 0:R.name)})))):i.a.createElement(g.a,{container:!0,spacing:6,alignContent:"center",justify:"center"},i.a.createElement(g.a,{item:!0,lg:6,md:6,sm:12,xs:12},i.a.createElement(h.a,{className:"px-6 pt-2 pb-4"},i.a.createElement(T,{action:z.action,letypedecoli:R,handleFermeture:()=>{B({mode:"affichage",action:"nouveau",affichageTable:!0}),K("Liste des typedecolis")}})))))}}}]);