(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[45],{2315:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"e",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return b})),a.d(t,"g",(function(){return h})),a.d(t,"b",(function(){return g}));var r=a(8),n=a.n(r),s=a(19),o=a(17);function i(e,t,a,r){return c.apply(this,arguments)}function c(){return(c=Object(s.a)(n.a.mark((function e(t,a,r,s){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/commandes?itemsPerPage="+a+"&page="+t+"&statut="+r);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t,a,r,n,s,o){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(n.a.mark((function e(t,a,r,s,i,c,l){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/periode/commandes/"+i.id+"?dateinitiale="+c+"&datefinale="+l+"&rowsPerPage="+a+"&page="+t);case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t,a,r,n,s,o){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(n.a.mark((function e(t,a,r,s,i,c,l){var u;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/periode/chauffeurs/"+i.id+"?dateinitiale="+c+"&datefinale="+l+"&rowsPerPage="+a+"&page="+t);case 3:return u=e.sent,e.abrupt("return",u.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/commandes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.put("/commandes/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.delete("/commandes/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function g(e){return E.apply(this,arguments)}function E(){return(E=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,o.b.post("/commande/"+t.id,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2353:function(e,t,a){"use strict";a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return d})),a.d(t,"e",(function(){return p})),a.d(t,"f",(function(){return b})),a.d(t,"b",(function(){return h}));var r=a(8),n=a.n(r),s=a(19),o=a(17);function i(e,t,a,r){return c.apply(this,arguments)}function c(){return(c=Object(s.a)(n.a.mark((function e(t,a,r,s){var i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/chauffeurs?itemsPerPage="+a+"&page="+t+"&nom="+r);case 3:return i=e.sent,e.abrupt("return",i.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e){return u.apply(this,arguments)}function u(){return(u=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/chauffeurs",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e){return m.apply(this,arguments)}function m(){return(m=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.put("/chauffeurs/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return f.apply(this,arguments)}function f(){return(f=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.delete("/chauffeurs/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function b(e){return y.apply(this,arguments)}function y(){return(y=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.put("/chauffeurs/statut/togle/"+t.id);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return v.apply(this,arguments)}function v(){return(v=Object(s.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.get("/chauffeurs/sansvehicule");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2354:function(e,t,a){"use strict";var r=a(0),n=a(51);t.a=Object(n.a)(r.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping")},3090:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var r=a(6),n=a(12),s=a(0),o=a.n(s),i=a(79),c=a(228),l=a(766),u=a(2202),d=a(64),m=a(1201),p=a(46),f=a(752),b=a(426),y=a(568),h=a(2315),v=a(73),g=a(84),E=a(32),x=(a(117),a(444),a(131),a(368),a(369),a(787)),j=(a(367),a(232),a(2353)),O=a(60),w=a(1192),R=a(229),P=a.n(R),D=a(231),B=a(3),C=a(2354),k=a(2285);const M=i.b().shape({client:i.c().required("Le  client est requis"),modedepayement:i.c().required("Le mode de payement est requis"),adressedepart:i.c().required("Le champs Adresse de d\xe9part est requis"),adressearrivee:i.c().required("Le champs Adresse d arriv\xe9e est requis"),montant:i.a().required("Montant requis").positive("Le mntant doit \xeatre un entier positif").integer("Le montant doit \xeatre un nombre entier")});function q({id:e,lecommande:t,handleFermeture:a,action:i}){const R=Object(E.useQueryClient)(),q=Object(s.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),N=Object(n.a)(q,2),L=N[0],S=N[1],A=Object(s.useState)({chauffeur:{id:1},dateinitiale:Object(w.a)(Date.parse(Date()),"yyyy-MM-dd"),datefinale:Object(w.a)(Date.parse(Date()),"yyyy-MM-dd")}),F=Object(n.a)(A,2),Q=F[0],T=F[1],H=Object(E.useQuery)(["Chauffeurs",1],()=>Object(j.c)(0,100,"",""),{keepPreviousData:!0}),z=Object(E.useQuery)(["Commandes",Q,L],()=>Object(h.d)(L.page,L.rowsPerPage,L.recherche,L.filtre,Q.chauffeur,Q.dateinitiale,Q.datefinale),{keepPreviousData:!0}),G=Object(s.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),J=Object(n.a)(G,2),V=J[0],I=J[1],W=Object(v.c)({resolver:Object(c.yupResolver)(M)}),K=W.control,U=(W.handleSubmit,W.errors);W.reset;const X=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(o.a.Fragment,null,"id: ",e," ","Colis"===t.rowData[5].nom?o.a.createElement(o.a.Fragment,null,o.a.createElement(C.a,null),o.a.createElement("br",null)):"","Colis"===t.rowData[5].nom?o.a.createElement("strong",null,t.rowData[6].nom):"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},Object(w.a)(Object(k.a)(t.rowData[15]),"dd/MM/yyyy hh:mm")))}},{name:"client",label:"Client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(o.a.Fragment,null,e.nom+" "+e.prenom,o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},e.telephone))}},{name:"quartierdedepart",label:"Depart",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return o.a.createElement(o.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},t.rowData[10]))}}},{name:"quartierdarrivee",label:"Arriv\xe9e",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return o.a.createElement(o.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},t.rowData[11]))}}},{name:"chauffeur",label:"Chauffeur",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r,n,s;return o.a.createElement(o.a.Fragment,null,(null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"")+" "+(null!==(n=null===e||void 0===e?void 0:e.prenom)&&void 0!==n?n:""),o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},null!==(s=null===e||void 0===e?void 0:e.telephone)&&void 0!==s?s:""))}}},{name:"typedecourse",label:"Type de course",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{switch(e.id){case 1:return e.nom;case 2:return o.a.createElement("span",null," ",e.nom,": ",o.a.createElement("br",null)," ",o.a.createElement("strong",null,t.rowData[6].nom)," ")}}}},{name:"typedecoli",label:"Type de colis",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:""}}},{name:"traitepar",label:"trait\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissepar",label:"Encaiss\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"modedepayement",label:"Mode de payement",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"adressedepart",label:"Adresse de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"adressearrivee",label:"Adresse d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsdepart",label:"Position GPS de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsarrivee",label:"Position GPS d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"statut",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement("small",{className:Object(B.default)({"border-radius-4  text-white px-2 py-2px":!0,"bg-primary":"Nouveau"===e,"bg-light-green":"En cours d'ex\xe9cution"===e,"bg-error":"Annul\xe9e"===e,"bg-secondary":"Confirm\xe9e"===e,"bg-green":"Clotur\xe9e"===e,"bg-gray":"Trait\xe9e"===e})},e)}},{name:"datecommande",label:"Date de la commande",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>Object(w.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"executionimmediate",label:"Execution immediate",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(l.a,{checked:e})}},{name:"dateexecution",label:"Date d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>Object(w.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"traitele",label:"Trait\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datedebutexecution",label:"D\xe9but d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datefinexecution",label:"Fin d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissele",label:"Encaiss\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"montant",label:"montant",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"recepteurducolis",label:"Recepteur du colis",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(o.a.Fragment,null,e,o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},t.rowData[24]))}},{name:"telephonerecepteur",label:"T\xe9l\xe9phone du recepteur de colis",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,display:"excluded",sort:!1,customBodyRender:(e,t,a)=>o.a.createElement("div",null)}}];return o.a.createElement("div",null,o.a.createElement(g.a,{message:V.message,severity:V.severity,open:V.open,handleAlertClose:V.automaticClose?a:()=>I(Object(r.a)(Object(r.a)({},V),{},{open:!1}))}),o.a.createElement("div",{className:"m-sm-30"},o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(u.a,{routeSegments:[{name:"Requetes sur les commandes"}]})),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(d.a,{variant:"h4"},"Rapport de commandes chauffeurs")),o.a.createElement(m.a,{className:"mb-sm-30"},o.a.createElement("form",null,o.a.createElement(p.a,{container:!0,spacing:3,direction:"column"},o.a.createElement(f.a,{pl:3,pb:5,pt:3},o.a.createElement(p.a,{item:!0},o.a.createElement(p.a,{container:!0,spacing:5,direction:"row"},o.a.createElement(p.a,{item:!0,sm:3,pt:5,pl:10},!0===H.isLoading?o.a.createElement(O.a,{message:"chargement"}):o.a.createElement(f.a,{pl:3},o.a.createElement(b.a,{fullWidth:!0,id:"chauffeur",name:"chauffeur",label:"chauffeur",select:!0,value:Q.chauffeur,onChange:function(e){console.log(e.target.value),T(Object(r.a)(Object(r.a)({},Q),{},{chauffeur:e.target.value})),R.invalidateQueries("Commandes")},helperText:"",error:!1},H.data["hydra:member"].map(e=>o.a.createElement(y.a,{key:e.id,value:e},e.nom," ",e.prenom))))),o.a.createElement(p.a,{item:!0,sm:3},o.a.createElement(x.a,{id:"dateinitiale",nom:"datefinale",label:"Date initiale",valeur:Q.dateinitiale,error:U.dateinitiale,control:K,handledatechange:function(e){console.log("Date initiale..."+e),T(Object(r.a)(Object(r.a)({},Q),{},{dateinitiale:Object(w.a)(Date.parse(e),"yyyy-MM-dd")})),R.invalidateQueries("Commandes")}})),o.a.createElement(p.a,{item:!0,sm:3},o.a.createElement(x.a,{id:"datefinale",nom:"datefinale",label:"Date finale",valeur:Q.datefinale,error:U.datefinale,control:K,handledatechange:function(e){console.log("date finale:::"+e),T(Object(r.a)(Object(r.a)({},Q),{},{datefinale:Object(w.a)(Date.parse(e),"yyyy-MM-dd")})),R.invalidateQueries("Commandes")}})))))))),o.a.createElement("div",null,o.a.createElement("div",null,o.a.createElement(m.a,{className:"mb-sm-30"},o.a.createElement(f.a,{pl:5,pt:1,pb:1},o.a.createElement(d.a,{variant:"body1",color:"initial"},"Montant total:"),o.a.createElement(d.a,{variant:"h6",color:"primary"},z.isLoading?o.a.createElement(O.a,{message:"Chargement des donn\xe9es...",type:"info"}):z.isError?o.a.createElement(O.a,{message:"Erreur lors du chargement des donn\xe9es::"+z.error,type:"error"}):z.data.montanttotal))," "),z.isLoading?o.a.createElement(O.a,{message:"Chargement des donn\xe9es...",type:"info"}):z.isError?o.a.createElement(O.a,{message:"Erreur lors du chargement des donn\xe9es::"+z.error,type:"error"}):o.a.createElement(P.a,{title:"Requ\xeates sur les commandes",data:z.data.commandes,columns:X,options:Object(r.a)(Object(r.a)({},D.a),{},{serverSide:!0,count:z.data.total,rowsPerPageOptions:[20,30,50,100],rowsPerPage:L.rowsPerPage,onChangePage:e=>(e=>{S(Object(r.a)(Object(r.a)({},L),{},{page:e})),R.invalidateQueries("Commandes")})(e),onChangeRowsPerPage:e=>(e=>{S(Object(r.a)(Object(r.a)({},L),{},{rowsPerPage:e})),console.log("statutbre de ligne par page:"+e),R.invalidateQueries("Commandes")})(e),onSearchChange:e=>(e=>{var t;S(Object(r.a)(Object(r.a)({},L),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),R.invalidateQueries("Commandes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})))))}}}]);