(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[72],{2389:function(e,a,t){"use strict";t.d(a,"c",(function(){return n})),t.d(a,"d",(function(){return c})),t.d(a,"b",(function(){return i})),t.d(a,"a",(function(){return s})),t.d(a,"e",(function(){return m}));var l=t(44),r=t.n(l);const n=()=>r.a.get("/api/invoices/all"),c=e=>r.a.get("/api/invoices",{data:e}),i=e=>r.a.post("/api/invoices/delete",e),s=e=>r.a.post("/api/invoices/add",e),m=e=>r.a.post("/api/invoices/update",e)},3151:function(e,a,t){"use strict";t.r(a);var l=t(12),r=t(0),n=t.n(r),c=t(1201),i=t(6),s=t(26),m=t(224),d=t(606),o=t(144),u=t(2241),E=t(1123),b=t(2283),p=t(1127),v=t(1125),N=t(1124),f=t(71),g=t(68),h=t(2389),O=t(1192),j=t(110),y=t(3);const x=Object(j.a)(e=>{e.palette,Object(s.a)(e,["palette"]);return{"@global":{"@media print":{"body, *, html":{visibility:"hidden"},"#print-area":{position:"fixed",top:0,left:0,right:0,height:"100%","& *":{visibility:"visible"}}}},invoiceViewer:{"& h5":{fontSize:15}}}});var w=({toggleInvoiceEditor:e})=>{const a=Object(r.useState)({}),t=Object(l.a)(a,2),s=t[0],j=t[1],w=Object(f.i)().id,C=x();Object(r.useEffect)(()=>{"add"!==w&&Object(h.d)(w).then(e=>{j(Object(i.a)({},e.data))})},[w]);let M=0,q=s.orderNo,T=s.buyer,V=s.seller,I=s.item,z=void 0===I?[]:I,S=s.status,k=s.vat,P=s.date;return n.a.createElement("div",{className:Object(y.default)("invoice-viewer py-4",C.invoiceViewer)},n.a.createElement("div",{className:"viewer_actions px-4 mb-5 flex items-center justify-between"},n.a.createElement(g.a,{to:"/invoice/list"},n.a.createElement(m.a,null,n.a.createElement(d.a,null,"arrow_back"))),n.a.createElement("div",null,n.a.createElement(o.a,{className:"mr-4 py-2",variant:"contained",color:"primary",onClick:()=>e()},"Edit Invoice"),n.a.createElement(o.a,{onClick:()=>window.print(),className:"py-2",variant:"contained",color:"secondary"},"Print Invoice"))),n.a.createElement("div",{id:"print-area"},n.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},n.a.createElement("div",null,n.a.createElement("h5",{className:"mb-2"},"Order Info"),n.a.createElement("p",{className:"mb-4"},"Order Number"),n.a.createElement("p",{className:"mb-0"},"# ",q)),n.a.createElement("div",{className:"text-right"},n.a.createElement("h5",{className:"font-normal mb-4 capitalize"},n.a.createElement("strong",null,"Order status:")," ",S),n.a.createElement("h5",{className:"font-normal capitalize"},n.a.createElement("strong",null,"Order date: ")," ",n.a.createElement("span",null,P?Object(O.a)(new Date(P).getTime(),"MMMM dd, yyyy"):"")))),n.a.createElement(u.a,null),n.a.createElement("div",{className:"viewer__billing-info px-4 py-5 flex justify-between"},n.a.createElement("div",null,n.a.createElement("h5",{className:"mb-2"},"Bill From"),n.a.createElement("p",{className:"mb-4"},V?V.name:null),n.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},V?V.address:null)),n.a.createElement("div",{className:"text-right w-full"},n.a.createElement("h5",{className:"mb-2"},"Bill To"),n.a.createElement("p",{className:"mb-4"},T?T.name:null),n.a.createElement("p",{className:"mb-0 whitespace-pre-wrap"},T?T.address:null)),n.a.createElement("div",null)),n.a.createElement(c.a,{className:"mb-4",elevation:0},n.a.createElement(E.a,null,n.a.createElement(b.a,null,n.a.createElement(p.a,null,n.a.createElement(v.a,{className:"pl-sm-24"},"#"),n.a.createElement(v.a,{className:"px-0"},"Item Name"),n.a.createElement(v.a,{className:"px-0"},"Unit Price"),n.a.createElement(v.a,{className:"px-0"},"Unit"),n.a.createElement(v.a,{className:"px-0"},"Cost"))),n.a.createElement(N.a,null,z.map((e,a)=>(M+=e.unit*e.price,n.a.createElement(p.a,{key:a},n.a.createElement(v.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},e.name),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},e.price),n.a.createElement(v.a,{className:"pl-0 capitalize"},e.unit),n.a.createElement(v.a,{className:"pl-0"},e.unit*e.price))))))),n.a.createElement("div",{className:"px-4 flex justify-end"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"pr-12"},n.a.createElement("p",{className:"mb-4"},"Sub Total:"),n.a.createElement("p",{className:"mb-4"},"Vat(%):"),n.a.createElement("strong",null,n.a.createElement("p",null,"Grand Total:"))),n.a.createElement("div",null,n.a.createElement("p",{className:"mb-4"},M),n.a.createElement("p",{className:"mb-4"},k),n.a.createElement("p",null,n.a.createElement("strong",null,"$",M+=M*k/100)))))))},C=t(262),M=t(1122),q=t(758),T=t(2298),V=t(46),I=t(105),z=t(69),S=t(2198),k=t(447);const P=Object(j.a)(e=>{e.palette,Object(s.a)(e,["palette"]);return{invoiceEditor:{"& h5":{fontSize:15}}}}),W={id:"",orderNo:"",buyer:{name:"",address:""},seller:{name:"",address:""},item:[],status:"",vat:"",date:new Date,currency:"",loading:!1};var _=({isNewInvoice:e,toggleInvoiceEditor:a})=>{const t=Object(r.useState)(!0),c=Object(l.a)(t,2),s=c[0],m=c[1],d=Object(r.useState)(W),g=Object(l.a)(d,2),O=g[0],j=g[1],x=Object(f.g)(),w=Object(f.i)().id,_=P(),B=Object(r.useCallback)(()=>{let e=Math.random().toString(),a=e.substr(2,e.length-1);j(e=>Object(i.a)(Object(i.a)({},e),{},{id:a}))},[]),D=e=>{e.persist(),j(Object(i.a)(Object(i.a)({},O),{},{[e.target.name]:e.target.value}))},U=(e,a)=>{e.persist(),j(Object(i.a)(Object(i.a)({},O),{},{[a]:Object(i.a)(Object(i.a)({},O[a]),{},{[e.target.name]:e.target.value})}))},A=(e,a)=>{let t=[...O.item];t.map((t,l)=>(a===l&&(t[e.target.name]=e.target.value),t)),j(Object(i.a)(Object(i.a)({},O),{},{item:t}))};Object(r.useEffect)(()=>{e?B():Object(h.d)(w).then(({data:e})=>{s&&j(Object(i.a)({},e))})},[w,e,s,B]),Object(r.useEffect)(()=>()=>m(!1),[]);let F=0,G=O.orderNo,J=O.buyer,K=O.seller,$=O.item,H=void 0===$?[]:$,L=O.status,Q=O.vat,R=O.date,X=O.currency,Y=O.loading;return n.a.createElement("div",{className:Object(y.default)("invoice-viewer py-4",_.invoiceEditor)},n.a.createElement(I.ValidatorForm,{onSubmit:()=>{j(Object(i.a)(Object(i.a)({},O),{},{loading:!0}));let t=Object(i.a)({},O);delete t.loading,e?Object(h.a)(t).then(()=>{j(Object(i.a)(Object(i.a)({},O),{},{loading:!1})),x.push("/invoice/".concat(O.id)),a()}):Object(h.e)(t).then(()=>{j(Object(i.a)(Object(i.a)({},O),{},{loading:!1})),a()})},onError:e=>null},n.a.createElement("div",{className:"viewer_actions px-4 flex justify-end"},n.a.createElement("div",{className:"mb-6"},n.a.createElement(o.a,{type:"button",className:"mr-4 py-2",variant:"text",onClick:()=>a()},"Cancel"),n.a.createElement(o.a,{type:"submit",className:"py-2",variant:"contained",color:"primary",disabled:Y},"Save"))),n.a.createElement("div",{className:"viewer__order-info px-4 mb-4 flex justify-between"},n.a.createElement("div",null,n.a.createElement("h5",{className:"mb-2"},"Order Info"),n.a.createElement("p",{className:"mb-4"},"Order Number"),n.a.createElement(I.TextValidator,{label:"Order No.",type:"text",fullWidth:!0,name:"orderNo",value:G,onChange:D,validators:["required"],errorMessages:["this field is required"]})),n.a.createElement("div",null,n.a.createElement(C.a,{component:"fieldset",className:"w-full mb-4"},n.a.createElement(M.a,{"aria-label":"status",name:"status",value:L,onChange:D},n.a.createElement(q.a,{className:"h-32",value:"pending",control:n.a.createElement(T.a,{color:"secondary"}),label:"Pending",labelPlacement:"start"}),n.a.createElement(q.a,{className:"h-32",value:"processing",control:n.a.createElement(T.a,{color:"secondary"}),label:"Processing",labelPlacement:"start"}),n.a.createElement(q.a,{className:"h-32",value:"delivered",control:n.a.createElement(T.a,{color:"secondary"}),label:"Delivered",labelPlacement:"start"}))),n.a.createElement("div",{className:"text-right"},n.a.createElement("h5",{className:"font-normal"},n.a.createElement("strong",null,"Order date: "))),n.a.createElement(z.a,{utils:k.a},n.a.createElement(S.b,{margin:"none",id:"mui-pickers-date",label:"Order Date",inputVariant:"standard",type:"text",autoOk:!0,value:R,fullWidth:!0,format:"MMMM dd, yyyy",onChange:e=>{j(Object(i.a)(Object(i.a)({},O),{},{date:e}))},KeyboardButtonProps:{"aria-label":"change date"}})))),n.a.createElement(u.a,null),n.a.createElement(V.a,{className:"px-4 py-5",container:!0,justify:"space-between",spacing:4},n.a.createElement(V.a,{item:!0},n.a.createElement("div",null,n.a.createElement("h5",{className:"mb-5 "},"Bill From"),n.a.createElement(I.TextValidator,{className:"mb-5",label:"Seller Name",onChange:e=>U(e,"seller"),type:"text",name:"name",fullWidth:!0,value:K?K.name:null,validators:["required"],errorMessages:["this field is required"]}),n.a.createElement(I.TextValidator,{label:"Seller Name",type:"text",onChange:e=>U(e,"seller"),name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:K?K.address:null,validators:["required"],errorMessages:["this field is required"]}))),n.a.createElement(V.a,{item:!0},n.a.createElement("div",{className:"text-right"},n.a.createElement("h5",{className:"mb-5"},"Bill To"),n.a.createElement(I.TextValidator,{className:"mb-5",label:"Buyer Name",onChange:e=>U(e,"buyer"),type:"text",name:"name",fullWidth:!0,value:J?J.name:null,validators:["required"],errorMessages:["this field is required"]}),n.a.createElement(I.TextValidator,{label:"Buyer Address",onChange:e=>U(e,"buyer"),type:"text",name:"address",fullWidth:!0,multiline:!0,rowsMax:4,value:J?J.address:null,validators:["required"],errorMessages:["this field is required"]})))),n.a.createElement(E.a,{className:"mb-4"},n.a.createElement(b.a,null,n.a.createElement(p.a,{className:"bg-default"},n.a.createElement(v.a,{className:"pl-sm-24"},"#"),n.a.createElement(v.a,{className:"px-0"},"Item Name"),n.a.createElement(v.a,{className:"px-0"},"Unit Price"),n.a.createElement(v.a,{className:"px-0"},"Unit"),n.a.createElement(v.a,{className:"px-0"},"Cost"),n.a.createElement(v.a,{className:"px-0"},"Action"))),n.a.createElement(N.a,null,H.map((e,a)=>(F+=e.price*e.unit,n.a.createElement(p.a,{key:a},n.a.createElement(v.a,{className:"pl-sm-24 capitalize",align:"left"},a+1),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},n.a.createElement(I.TextValidator,{label:"Item Name",onChange:e=>A(e,a),type:"text",name:"name",fullWidth:!0,value:e?e.name:null,validators:["required"],errorMessages:["this field is required"]})),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},n.a.createElement(I.TextValidator,{label:"Item Price",onChange:e=>A(e,a),type:"number",name:"price",fullWidth:!0,value:e?e.price:null,validators:["required"],errorMessages:["this field is required"]})),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},n.a.createElement(I.TextValidator,{label:"Item Unit",onChange:e=>A(e,a),type:"number",name:"unit",fullWidth:!0,value:e?e.unit:null,validators:["required"],errorMessages:["this field is required"]})),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},e.unit*e.price),n.a.createElement(v.a,{className:"pl-0 capitalize",align:"left"},n.a.createElement(o.a,{onClick:()=>(e=>{let a=[...O.item];a.splice(e,1),j(Object(i.a)(Object(i.a)({},O),{},{item:a}))})(a)},"Delete"))))))),n.a.createElement("div",{className:"flex justify-end px-4 mb-4"},n.a.createElement(o.a,{onClick:()=>{let e=[...O.item];e.push({name:"",unit:"",price:""}),j(Object(i.a)(Object(i.a)({},O),{},{item:e}))}},"Add Item")),n.a.createElement("div",{className:"px-4 flex justify-end"},n.a.createElement("div",{className:"flex"},n.a.createElement("div",{className:"pr-12"},n.a.createElement("p",{className:"mb-8"},"Sub Total:"),n.a.createElement("p",{className:"mb-12"},"Vat(%):"),n.a.createElement("p",{className:"mb-5"},"currency:"),n.a.createElement("strong",null,n.a.createElement("p",null,"Grand Total:"))),n.a.createElement("div",null,n.a.createElement("p",{className:"mb-4"},F),n.a.createElement(I.TextValidator,{className:"mb-4",label:"Vat",onChange:D,type:"number",name:"vat",value:Q,validators:["required"],errorMessages:["this field is required"]}),n.a.createElement("br",null),n.a.createElement(I.TextValidator,{label:"Currency",onChange:D,type:"text",name:"currency",value:X,validators:["required"],errorMessages:["this field is required"]}),n.a.createElement("p",{className:"mt-4"},n.a.createElement("strong",null,X,F+F*Q/100)))))))};a.default=()=>{const e=Object(r.useState)(!1),a=Object(l.a)(e,2),t=a[0],i=a[1],s=Object(r.useState)(!1),m=Object(l.a)(s,2),d=m[0],o=m[1],u=Object(f.i)().id,E=()=>{i(!t),o(!1)};return Object(r.useEffect)(()=>{"add"===u&&(i(!0),o(!0))},[u]),n.a.createElement(c.a,{elevation:6,className:"m-sm-30"},t?n.a.createElement(_,{toggleInvoiceEditor:E,isNewInvoice:d}):n.a.createElement(w,{toggleInvoiceEditor:E}))}}}]);