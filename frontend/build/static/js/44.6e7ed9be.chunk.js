(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[44],{2315:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"e",(function(){return c})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return y})),a.d(t,"g",(function(){return v})),a.d(t,"b",(function(){return h}));var n=a(8),r=a.n(n),o=a(19),l=a(17);function s(e,t,a,n){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function e(t,a,n,o){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/commandes?itemsPerPage="+a+"&page="+t+"&statut="+n);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t,a,n,r,o,l){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(t,a,n,o,s,i,c){var d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/periode/commandes/"+s.id+"?dateinitiale="+i+"&datefinale="+c+"&rowsPerPage="+a+"&page="+t);case 3:return d=e.sent,e.abrupt("return",d.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,a,n,r,o,l){return m.apply(this,arguments)}function m(){return(m=Object(o.a)(r.a.mark((function e(t,a,n,o,s,i,c){var d;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/periode/chauffeurs/"+s.id+"?dateinitiale="+i+"&datefinale="+c+"&rowsPerPage="+a+"&page="+t);case 3:return d=e.sent,e.abrupt("return",d.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.post("/commandes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return f.apply(this,arguments)}function f(){return(f=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.put("/commandes/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return g.apply(this,arguments)}function g(){return(g=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.b.delete("/commandes/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return E.apply(this,arguments)}function E(){return(E=Object(o.a)(r.a.mark((function e(t){var a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,l.b.post("/commande/"+t.id,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2321:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var n=a(8),r=a.n(n),o=a(19),l=a(17);function s(e,t,a,n){return i.apply(this,arguments)}function i(){return(i=Object(o.a)(r.a.mark((function e(t,a,n,o){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+n);case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function c(e,t,a,n){return d.apply(this,arguments)}function d(){return(d=Object(o.a)(r.a.mark((function e(t,a,n,o){var s;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,l.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+n+"&actif=1");case 3:return s=e.sent,e.abrupt("return",s.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2354:function(e,t,a){"use strict";var n=a(0),r=a(51);t.a=Object(r.a)(n.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping")},3089:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return q}));var n=a(6),r=a(12),o=a(0),l=a.n(o),s=a(79),i=a(228),c=a(766),d=a(2202),u=a(64),m=a(1201),p=a(46),b=a(752),y=a(426),f=a(568),v=a(2315),g=a(73),h=a(84),E=a(32),j=(a(117),a(444),a(131),a(368),a(369),a(787)),O=(a(367),a(232)),x=(a(2321),a(60)),w=a(1192),R=a(229),P=a.n(R),D=a(231),B=a(3),C=a(2354),M=a(2285);const k=s.b().shape({client:s.c().required("Le  client est requis"),modedepayement:s.c().required("Le mode de payement est requis"),adressedepart:s.c().required("Le champs Adresse de d\xe9part est requis"),adressearrivee:s.c().required("Le champs Adresse d arriv\xe9e est requis"),montant:s.a().required("Montant requis").positive("Le mntant doit \xeatre un entier positif").integer("Le montant doit \xeatre un nombre entier")});function q({id:e,lecommande:t,handleFermeture:a,action:s}){const R=Object(E.useQueryClient)(),q=Object(o.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),N=Object(r.a)(q,2),L=N[0],S=N[1],F=Object(o.useState)({client:{id:4},dateinitiale:Object(w.a)(Date.parse(Date()),"yyyy-MM-dd"),datefinale:Object(w.a)(Date.parse(Date()),"yyyy-MM-dd")}),A=Object(r.a)(F,2),Q=A[0],T=A[1],H=Object(E.useQuery)(["Clients",1],()=>Object(O.d)(0,100,"",""),{keepPreviousData:!0}),z=Object(E.useQuery)(["Commandes",Q,L],()=>Object(v.e)(L.page,L.rowsPerPage,L.recherche,L.filtre,Q.client,Q.dateinitiale,Q.datefinale),{keepPreviousData:!0}),G=Object(o.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),J=Object(r.a)(G,2),V=J[0],I=J[1],W=Object(g.c)({resolver:Object(i.yupResolver)(k)}),K=W.control,U=(W.handleSubmit,W.errors);W.reset;const X=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(l.a.Fragment,null,"id: ",e," ","Colis"===t.rowData[5].nom?l.a.createElement(l.a.Fragment,null,l.a.createElement(C.a,null),l.a.createElement("br",null)):"","Colis"===t.rowData[5].nom?l.a.createElement("strong",null,t.rowData[6].nom):"",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},Object(w.a)(Object(M.a)(t.rowData[15]),"dd/MM/yyyy hh:mm")))}},{name:"client",label:"Client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(l.a.Fragment,null,e.nom+" "+e.prenom,l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},e.telephone))}},{name:"quartierdedepart",label:"Depart",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var n;return l.a.createElement(l.a.Fragment,null,null!==(n=null===e||void 0===e?void 0:e.nom)&&void 0!==n?n:"",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},t.rowData[10]))}}},{name:"quartierdarrivee",label:"Arriv\xe9e",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var n;return l.a.createElement(l.a.Fragment,null,null!==(n=null===e||void 0===e?void 0:e.nom)&&void 0!==n?n:"",l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},t.rowData[11]))}}},{name:"chauffeur",label:"Chauffeur",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var n,r,o;return l.a.createElement(l.a.Fragment,null,(null!==(n=null===e||void 0===e?void 0:e.nom)&&void 0!==n?n:"")+" "+(null!==(r=null===e||void 0===e?void 0:e.prenom)&&void 0!==r?r:""),l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},null!==(o=null===e||void 0===e?void 0:e.telephone)&&void 0!==o?o:""))}}},{name:"typedecourse",label:"Type de course",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{switch(e.id){case 1:return e.nom;case 2:return l.a.createElement("span",null," ",e.nom,": ",l.a.createElement("br",null)," ",l.a.createElement("strong",null,t.rowData[6].nom)," ")}}}},{name:"typedecoli",label:"Type de colis",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{var n;return null!==(n=null===e||void 0===e?void 0:e.nom)&&void 0!==n?n:""}}},{name:"traitepar",label:"trait\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissepar",label:"Encaiss\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"modedepayement",label:"Mode de payement",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"adressedepart",label:"Adresse de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"adressearrivee",label:"Adresse d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsdepart",label:"Position GPS de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsarrivee",label:"Position GPS d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"statut",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement("small",{className:Object(B.default)({"border-radius-4  text-white px-2 py-2px":!0,"bg-primary":"Nouveau"===e,"bg-light-green":"En cours d'ex\xe9cution"===e,"bg-error":"Annul\xe9e"===e,"bg-secondary":"Confirm\xe9e"===e,"bg-green":"Clotur\xe9e"===e,"bg-gray":"Trait\xe9e"===e})},e)}},{name:"datecommande",label:"Date de la commande",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>Object(w.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"executionimmediate",label:"Execution immediate",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(c.a,{checked:e})}},{name:"dateexecution",label:"Date d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>Object(w.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"traitele",label:"Trait\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datedebutexecution",label:"D\xe9but d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datefinexecution",label:"Fin d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissele",label:"Encaiss\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"montant",label:"montant",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"recepteurducolis",label:"Recepteur du colis",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>l.a.createElement(l.a.Fragment,null,e,l.a.createElement("br",null),l.a.createElement("small",{className:"text-muted"},t.rowData[24]))}},{name:"telephonerecepteur",label:"T\xe9l\xe9phone du recepteur de colis",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,display:"excluded",sort:!1,customBodyRender:(e,t,a)=>l.a.createElement("div",null)}}];return l.a.createElement("div",null,l.a.createElement(h.a,{message:V.message,severity:V.severity,open:V.open,handleAlertClose:V.automaticClose?a:()=>I(Object(n.a)(Object(n.a)({},V),{},{open:!1}))}),l.a.createElement("div",{className:"m-sm-30"},l.a.createElement("div",{className:"mb-sm-30"},l.a.createElement(d.a,{routeSegments:[{name:"Requetes sur les commandes"}]})),l.a.createElement("div",{className:"mb-sm-30"},l.a.createElement(u.a,{variant:"h4"},"Rapport des commandes clients")),l.a.createElement(m.a,{className:"mb-sm-30"},l.a.createElement("form",null,l.a.createElement(p.a,{container:!0,spacing:3,direction:"column"},l.a.createElement(b.a,{pl:3,pb:5,pt:3},l.a.createElement(p.a,{item:!0},l.a.createElement(p.a,{container:!0,spacing:5,direction:"row"},l.a.createElement(p.a,{item:!0,sm:3,pt:5,pl:10},!0===H.isLoading?l.a.createElement(x.a,{message:"chargement"}):l.a.createElement(b.a,{pl:3},l.a.createElement(y.a,{fullWidth:!0,id:"client",name:"client",label:"client",select:!0,value:Q.client,onChange:function(e){console.log(e.target.value),T(Object(n.a)(Object(n.a)({},Q),{},{client:e.target.value})),R.invalidateQueries("Commandes")},helperText:"",error:!1},H.data["hydra:member"].map(e=>l.a.createElement(f.a,{key:e.id,value:e},e.nom))))),l.a.createElement(p.a,{item:!0,sm:3},l.a.createElement(j.a,{id:"dateinitiale",nom:"datefinale",label:"Date initiale",valeur:Q.dateinitiale,error:U.dateinitiale,control:K,handledatechange:function(e){console.log("Date initiale..."+e),T(Object(n.a)(Object(n.a)({},Q),{},{dateinitiale:Object(w.a)(Date.parse(e),"yyyy-MM-dd")})),R.invalidateQueries("Commandes")}})),l.a.createElement(p.a,{item:!0,sm:3},l.a.createElement(j.a,{id:"datefinale",nom:"datefinale",label:"Date finale",valeur:Q.datefinale,error:U.datefinale,control:K,handledatechange:function(e){console.log("date finale:::"+e),T(Object(n.a)(Object(n.a)({},Q),{},{datefinale:Object(w.a)(Date.parse(e),"yyyy-MM-dd")})),R.invalidateQueries("Commandes")}})))))))),l.a.createElement("div",null,l.a.createElement("div",null,l.a.createElement(m.a,{className:"mb-sm-30"},l.a.createElement(b.a,{pl:5,pt:1,pb:1},l.a.createElement(u.a,{variant:"body1",color:"initial"},"Montant total:"),l.a.createElement(u.a,{variant:"h6",color:"primary"},z.isLoading?l.a.createElement(x.a,{message:"Chargement des donn\xe9es...",type:"info"}):z.isError?l.a.createElement(x.a,{message:"Erreur lors du chargement des donn\xe9es::"+z.error,type:"error"}):z.data.montanttotal))," "),z.isLoading?l.a.createElement(x.a,{message:"Chargement des donn\xe9es...",type:"info"}):z.isError?l.a.createElement(x.a,{message:"Erreur lors du chargement des donn\xe9es::"+z.error,type:"error"}):l.a.createElement(P.a,{title:"Requ\xeates sur les commandes",data:z.data.commandes,columns:X,options:Object(n.a)(Object(n.a)({},D.a),{},{serverSide:!0,count:z.data.total,rowsPerPageOptions:[20,30,50,100],rowsPerPage:L.rowsPerPage,onChangePage:e=>(e=>{S(Object(n.a)(Object(n.a)({},L),{},{page:e})),R.invalidateQueries("Commandes")})(e),onChangeRowsPerPage:e=>(e=>{S(Object(n.a)(Object(n.a)({},L),{},{rowsPerPage:e})),console.log("statutbre de ligne par page:"+e),R.invalidateQueries("Commandes")})(e),onSearchChange:e=>(e=>{var t;S(Object(n.a)(Object(n.a)({},L),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),R.invalidateQueries("Commandes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})))))}}}]);