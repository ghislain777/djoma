(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[30],{2326:function(e,t,a){"use strict";var r=a(0),o=a(51);t.a=Object(o.a)(r.createElement("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"}),"Send")},2327:function(e,t,a){"use strict";var r=a(0),o=a(51);t.a=Object(o.a)(r.createElement("path",{d:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"}),"Visibility")},2330:function(e,t,a){"use strict";var r=a(0),o=a(51);t.a=Object(o.a)(r.createElement("path",{d:"M14.06 9.02l.92.92L5.92 19H5v-.92l9.06-9.06M17.66 3c-.25 0-.51.1-.7.29l-1.83 1.83 3.75 3.75 1.83-1.83c.39-.39.39-1.02 0-1.41l-2.34-2.34c-.2-.2-.45-.29-.71-.29zm-3.6 3.19L3 17.25V21h3.75L17.81 9.94l-3.75-3.75z"}),"EditOutlined")},2331:function(e,t,a){"use strict";var r=a(0),o=a(51);t.a=Object(o.a)(r.createElement("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete")},2373:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var r=a(8),o=a.n(r),n=a(19),i=a(17);class s{getTouslesProspects(e,t,a,r){return Object(n.a)(o.a.mark((function r(){var n;return o.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e+=1,r.next=3,i.b.get("/prospects?itemsPerPage="+t+"&page="+e+"&id="+a);case 3:return n=r.sent,r.abrupt("return",n.data);case 5:case"end":return r.stop()}}),r)})))()}ajoutProspect(e){return Object(n.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.post("/prospects",e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}miseajourProspect(e){return Object(n.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.put("/prospects/"+e.id,e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}suppressionProspect(e){return Object(n.a)(o.a.mark((function t(){var a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.b.delete("/prospects/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"},data:e.id});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}}},3119:function(e,t,a){"use strict";a.r(t);var r=a(6),o=a(12),n=a(0),i=a.n(n),s=a(2373),l=a(32),c=a(229),u=a.n(c),d=a(231),m=a(1198),p=a(2267),b=a(2191),v=a(64),f=a(1241),g=a(144),E=a(1201),h=a(84),j=a(204),O=a(230),y=a(60),w=a(300),D=(a(443),a(17)),P=a(1196),S=a(79),q=a(46),R=a(1204),x=a(224),C=a(1203),L=a(1202),A=a(783),M=a(117),k=a(131),I=(a(368),a(369),a(265)),T=(a(444),a(787),a(2326));function N(e){var t,a,r,o,n,s,l,c,u,d,m,p,b,f,h,j,O,w,S,N,B,Q,V,F,z,U,H,W,J;const Y=e.state,G=e.fonctions,K=e.queries,X=e.useform,Z=e.onSubmit;return i.a.createElement("div",null,i.a.createElement(q.a,{container:!0,spacing:1,justify:"center"},i.a.createElement(q.a,{item:!0,lg:6,md:6,sm:12,xs:12},i.a.createElement(P.a,{theme:Object(D.a)()},i.a.createElement(E.a,null,i.a.createElement(R.a,{action:i.a.createElement(x.a,{"aria-label":"",onClick:G.AnnulerEnregistrement},"x"),title:"ajout"===Y.pagestate.action?"Nouveau prospect":"Mise \xe0 jour de prospect",subheader:""}),i.a.createElement(C.a,{className:" px-6 pt-6 pb-6"}," ",i.a.createElement("form",{onSubmit:X.handleSubmit(Z)},i.a.createElement(q.a,{container:!0,spacing:4,direction:"column"},i.a.createElement(q.a,{item:!0},K.queryQuartiers.isLoading?i.a.createElement(y.a,{message:"chargement des roles"}):i.a.createElement(k.a,{id:"quartier",name:"quartier",label:"Quartier*",table:"quartier",control:X.control,options:K.queryQuartiers.data["hydra:member"],error:X.errors.quartier,defaultValue:"/api/quartiers/"+(null!==(t=null===(a=Y.prospect)||void 0===a||null===(r=a.quartier)||void 0===r?void 0:r.id)&&void 0!==t?t:"1"),valeur:null!==(o=null===(n=Y.quartier)||void 0===n?void 0:n.quartier)&&void 0!==o?o:""})),i.a.createElement(q.a,{item:!0},i.a.createElement(I.a,{id:"sexe",nom:"sexe",label:"Sexe*",defaultValue:null===(s=Y.prospect)||void 0===s?void 0:s.sexe,valeur:null===(l=Y.prospect)||void 0===l?void 0:l.sexe,control:X.control,error:X.errors.sexe,liste:[{id:1,label:"HOMME",value:"HOMME"},{id:2,label:"FEMME",value:"FEMME"}]})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"nom",nom:"nom",label:"Nom*",valeur:null===(c=Y.prospect)||void 0===c?void 0:c.nom,control:X.control,error:X.errors.nom})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"prenom",nom:"prenom",label:"Pr\xe9nom",valeur:null===(u=Y.prospect)||void 0===u?void 0:u.prenom,control:X.control,error:X.errors.prenom})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"telephone",nom:"telephone",label:"T\xe9l\xe9phone*",valeur:null===(d=Y.prospect)||void 0===d?void 0:d.telephone,control:X.control,error:X.errors.telephone})),i.a.createElement(q.a,{item:!0},i.a.createElement(I.a,{id:"piecedidentite",nom:"piecedidentite",label:"Pi\xe8ce didentit\xe9*",valeur:null===(m=Y.prospect)||void 0===m?void 0:m.piecedidentite,control:X.control,error:X.errors.piecedidentite,liste:[{id:1,label:"CNI",value:"CNI"},{id:2,label:"PASSEPORT",value:"PASSEPORT"},{id:3,label:"PERMIS DE CONDUIRE",value:"PERMIS DE CONDUIRE"},{id:4,label:"AUTRE",value:"AUTRE"}]})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"numeropiece",nom:"numeropiece",label:"Numero pi\xe8ce*",valeur:null===(p=Y.prospect)||void 0===p?void 0:p.numeropiece,control:X.control,error:X.errors.numeropiece})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"telephoneparent",nom:"telephoneparent",label:"T\xe9l\xe9phone de parent",valeur:null===(b=Y.prospect)||void 0===b?void 0:b.telephoneparent,control:X.control,error:X.errors.telephoneparent})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"activitepro",nom:"activitepro",label:"Activit\xe9*",valeur:null===(f=Y.prospect)||void 0===f?void 0:f.activitepro,control:X.control,error:X.errors.activitepro})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"employeur",nom:"employeur",label:"employeur",valeur:null===(h=Y.prospect)||void 0===h?void 0:h.employeur,control:X.control,error:X.errors.employeur})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"nomconjoint",nom:"nomconjoint",label:"Conjoint",valeur:null===(j=Y.prospect)||void 0===j?void 0:j.nomconjoint,control:X.control,error:X.errors.nomconjoint})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"professionconjoint",nom:"professionconjoint",label:"Profession du conjoint",valeur:null===(O=Y.prospect)||void 0===O?void 0:O.professionconjoint,control:X.control,error:X.errors.professionconjoint})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"revenumensuel",nom:"revenumensuel",label:"Revenu mensuel*",valeur:null===(w=Y.prospect)||void 0===w?void 0:w.revenumensuel,control:X.control,error:X.errors.revenumensuel})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"nombredenfants",nom:"nombredenfants",label:"Nombre denfants",valeur:null===(S=Y.prospect)||void 0===S?void 0:S.nombredenfants,control:X.control,error:X.errors.nombredenfants})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"nombredenfantscolarise",nom:"nombredenfantscolarise",label:"Enfants ecolaris\xe9s",valeur:null===(N=Y.prospect)||void 0===N?void 0:N.nombredenfantscolarise,control:X.control,error:X.errors.nombredenfantscolarise})),i.a.createElement(q.a,{item:!0},K.querySoustraitants.isLoading?i.a.createElement(y.a,{message:"chargement des roles"}):i.a.createElement(k.a,{id:"soustraitant",name:"soustraitant",label:"Soustraitant",table:"soustraitant",control:X.control,options:K.querySoustraitants.data["hydra:member"],error:X.errors.soustraitant,defaultValue:"/api/soustraitants/"+(null!==(B=null===(Q=Y.prospect)||void 0===Q||null===(V=Q.soustraitant)||void 0===V?void 0:V.id)&&void 0!==B?B:"1"),valeur:null!==(F=null===(z=Y.utilisateur)||void 0===z?void 0:z.soustraitant)&&void 0!==F?F:""})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"age",nom:"age",label:"Age",valeur:null===(U=Y.prospect)||void 0===U?void 0:U.age,control:X.control,error:X.errors.age})),i.a.createElement(q.a,{item:!0},i.a.createElement(M.a,{id:"montantdeladette",nom:"montantdeladette",label:"Montant de dette ant\xe9rieur",valeur:null===(H=Y.prospect)||void 0===H?void 0:H.montantdeladette,control:X.control,error:X.errors.montantdeladette})),i.a.createElement(q.a,{item:!0},i.a.createElement(I.a,{id:"situationmatrimoniale",nom:"situationmatrimoniale",label:"Situation matrimoniale*",valeur:null===(W=Y.prospect)||void 0===W?void 0:W.situationmatrimoniale,control:X.control,error:X.errors.situationmatrimoniale,liste:[{id:1,label:"CELIBATAIRE",value:"CELIBATAIRE"},{id:2,label:"MARIE(E)",value:"MARIE(E)"},{id:3,label:"VEUF/VEUVE",value:"VEUF/VEUVE"},{id:4,label:"DIVORSE",value:"DIVORSE"}]})),i.a.createElement(q.a,{item:!0},i.a.createElement(I.a,{id:"locataire",nom:"locataire",label:"Locataire",valeur:null===(J=Y.prospect)||void 0===J?void 0:J.locataire,control:X.control,error:X.errors.locataire,liste:[{id:1,label:"LOCATAIRE",value:"LOCATAIRE"},{id:2,label:"PROPRIETAIRE",value:"PROPRIETAIRE"}]}))))),i.a.createElement(L.a,null,i.a.createElement(q.a,{container:!0,alignItems:"center",justify:"space-between"},i.a.createElement(q.a,{item:!0},i.a.createElement(g.a,{color:"primary",variant:"contained",type:"submit",onClick:X.handleSubmit(Z)},K.mutationMiseajour.isLoading||K.mutationAjout.isLoading?i.a.createElement(A.a,{color:"inherit"}):i.a.createElement(T.a,null),i.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===Y.pagestate.action?i.a.createElement(v.a,null,"Enregistrer"):i.a.createElement(v.a,null,"Mettre \xe0 jour")))),i.a.createElement(q.a,{item:!0},i.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:G.AnnulerEnregistrement},"Annuler")))))))))}var B=e=>{var t,a;const o=e.state,n=e.fonctions,s=e.collonnes,l=e.queries,c=e.useform,S=e.onSubmit;return i.a.createElement("div",{className:"m-sm-30"},i.a.createElement(m.a,{open:o.dialoguephoto.open,"aria-labelledby":"",maxWidth:"md",onClose:n.handleCloseDialoguephoto,objet:o.dialoguephoto.objet},i.a.createElement(p.a,{id:""},o.dialoguephoto.titre),i.a.createElement(b.a,null,i.a.createElement("img",{src:D.f+"/fichiers/"+o.dialoguephoto.objet+"/"+o.dialoguephoto.fichier,alt:"{objet}",srcset:""}))),i.a.createElement(h.a,{message:o.alert.message,severity:o.alert.severity,open:o.alert.open,handleAlertClose:!0===o.alert.automaticClose?()=>n.handleFermetureAlerte():()=>n.fermerAlerte()}),i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(j.a,{routeSegments:[{name:o.titre}]})),i.a.createElement("div",{className:"mb-sm-30"},i.a.createElement(v.a,{variant:"h4"},o.titre)),"affichage"===o.pagestate.mode?i.a.createElement(f.a,{in:o.pagestate.affichageTable,direction:"right",unmountOnExit:!0},i.a.createElement("div",null,i.a.createElement(g.a,{className:"mb-4",variant:"contained",color:"primary",onClick:()=>n.handleClicksurNouveau()},"Nouveau prospect"),l.queryProspects.isLoading?i.a.createElement(y.a,{message:"Chargement des donn\xe9es...",type:"info"}):l.queryProspects.isError?i.a.createElement(y.a,{message:"Erreur lors du chargement des donn\xe9es::"+l.queryProspects.error,type:"error"}):i.a.createElement(w.a,{tag:"div",blocking:!1},i.a.createElement(P.a,{theme:Object(D.a)()},i.a.createElement(u.a,{title:o.titre,data:l.queryProspects.data["hydra:member"],columns:s,options:Object(r.a)(Object(r.a)({},d.a),{},{serverSide:!0,count:l.queryProspects.data["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:o.tableconfig.rowsPerPage,textLabels:Object(r.a)(Object(r.a)({},d.a.textLabels),{},{toolar:Object(r.a)(Object(r.a)({},d.a.textLabels.toolbar),{},{search:"Rechercher par id"})}),onChangePage:e=>n.handleChangePage(e),onChangeRowsPerPage:e=>n.handleChangeRowPerPage(e),onSearchChange:e=>n.handleSearchChange(e),onFilterChange:()=>n.handleFilterChange()})}))),i.a.createElement(E.a,{className:"w-full overflow-auto",elevation:8},i.a.createElement(O.a,{open:o.dialogueSuppressionOuvert,onConfirmDialogClose:n.fermerDialogueSuppression,onYesClick:n.confirmerSuppression,text:null!==(t="Confirmez la suppression de "+(null===(a=o.prospect)||void 0===a?void 0:a.nom))&&void 0!==t?t:""})))):i.a.createElement(N,{state:o,fonctions:n,queries:l,useform:c,onSubmit:S}))},Q=a(26),V=a(95),F=a(2327),z=a(2330),U=a(2331),H=a(2286),W=a(110),J=a(2201),Y=a(568),G=a(2241),K=a(1192),X=a(2285);Object(W.a)(e=>{e.palette,Object(Q.a)(e,["palette"]);return{userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185}}});function Z(e){const t=Object(W.a)(e=>{e.palette,Object(Q.a)(e,["palette"]);return{userMenu:{display:"flex",alignItems:"center",cursor:"pointer",borderRadius:24,padding:4,"& span":{margin:"0 8px"}},menuItem:{display:"flex",alignItems:"center",minWidth:185}}}),a=(t,a)=>{switch(console.log("Action sur une prospect::::Action="+a+" prospect :::"+t.id),a){case"D\xe9tails":console.log("action details");break;case"Modifier":e.handleClickSurEdit(t);break;case"Supprimer":e.handleClickSurSupprimer(t)}};return[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.toLocaleString("fr-FR"))&&void 0!==r?r:""}}},{name:"quartier",label:"Quartier*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:" "}}},{name:"sexe",label:"Sexe*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"nom",label:"Nom*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"prenom",label:"Pr\xe9nom",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"telephone",label:"T\xe9l\xe9phone*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"piecedidentite",label:"Pi\xe8ce didentit\xe9*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"numeropiece",label:"Numero pi\xe8ce*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"telephoneparent",label:"T\xe9l\xe9phone de parent",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"activitepro",label:"Activit\xe9*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"employeur",label:"employeur",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"nomconjoint",label:"Conjoint",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"professionconjoint",label:"Profession du conjoint",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"revenumensuel",label:"Revenu mensuel*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.toLocaleString("fr-FR"))&&void 0!==r?r:""}}},{name:"nombredenfants",label:"Nombre denfants",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.toLocaleString("fr-FR"))&&void 0!==r?r:""}}},{name:"nombredenfantscolarise",label:"Enfants ecolaris\xe9s",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.toLocaleString("fr-FR"))&&void 0!==r?r:""}}},{name:"soustraitant",label:"Soustraitant",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:" "}}},{name:"datedecreation",label:"Date de cr\xe9ation",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>null==e?" ":Object(K.a)(Object(X.a)(e),"dd/MM/yyyy")}},{name:"age",label:"Age",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.toLocaleString("fr-FR"))&&void 0!==r?r:""}}},{name:"montantdeladette",label:"Montant de dette ant\xe9rieur",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.toLocaleString("fr-FR"))&&void 0!==r?r:""}}},{name:"situationmatrimoniale",label:"Situation matrimoniale*",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"locataire",label:"Locataire",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,sort:!1,customBodyRender:(e,r,o)=>i.a.createElement("div",null,i.a.createElement(V.p,{menuButton:i.a.createElement("div",{className:t.userMenu},i.a.createElement(J.a,{xsDown:!0},i.a.createElement(g.a,{size:"small",variant:"outlined",color:"primary",endIcon:i.a.createElement(H.a,null)},"Actions")))},(e=>{switch(e.statut){case"Annul\xe9":return[{id:1,nom:"D\xe9tails",action:e=>a(e,"D\xe9tails"),icon:i.a.createElement(F.a,{color:"primary"})}];case"Nouveau":default:return[{id:1,nom:"D\xe9tails",action:e=>a(e,"D\xe9tails"),icon:i.a.createElement(F.a,{color:"primary"})},{id:2,nom:"Modifier",action:e=>a(e,"Modifier"),icon:i.a.createElement(z.a,{color:"primary"})},{id:3,nom:"Supprimer",action:e=>a(e,"Supprimer"),icon:i.a.createElement(U.a,{color:"error"})}]}})({id:r.rowData[0],quartier:r.rowData[1],sexe:r.rowData[2],nom:r.rowData[3],prenom:r.rowData[4],telephone:r.rowData[5],piecedidentite:r.rowData[6],numeropiece:r.rowData[7],telephoneparent:r.rowData[8],activitepro:r.rowData[9],employeur:r.rowData[10],nomconjoint:r.rowData[11],professionconjoint:r.rowData[12],revenumensuel:r.rowData[13],nombredenfants:r.rowData[14],nombredenfantscolarise:r.rowData[15],soustraitant:r.rowData[16],datedecreation:r.rowData[17],age:r.rowData[18],montantdeladette:r.rowData[19],situationmatrimoniale:r.rowData[20],locataire:r.rowData[21]}).map(e=>i.a.createElement(i.a.Fragment,null,i.a.createElement(Y.a,{onClick:()=>e.action({id:r.rowData[0],quartier:r.rowData[1],sexe:r.rowData[2],nom:r.rowData[3],prenom:r.rowData[4],telephone:r.rowData[5],piecedidentite:r.rowData[6],numeropiece:r.rowData[7],telephoneparent:r.rowData[8],activitepro:r.rowData[9],employeur:r.rowData[10],nomconjoint:r.rowData[11],professionconjoint:r.rowData[12],revenumensuel:r.rowData[13],nombredenfants:r.rowData[14],nombredenfantscolarise:r.rowData[15],soustraitant:r.rowData[16],datedecreation:r.rowData[17],age:r.rowData[18],montantdeladette:r.rowData[19],situationmatrimoniale:r.rowData[20],locataire:r.rowData[21]}),key:e.id,value:e.statut},e.icon,"   ",i.a.createElement("span",{className:"ml-5"},e.nom)),i.a.createElement(G.a,null)))))}}]}var $=a(73),_=(a(367),a(228)),ee=a(8),te=a.n(ee),ae=a(19);class re{getTouslesQuartiers(e,t,a,r){return Object(ae.a)(te.a.mark((function r(){var o;return te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e+=1,r.next=3,D.b.get("/quartiers?itemsPerPage="+t+"&page="+e+"&id="+a);case 3:return o=r.sent,r.abrupt("return",o.data);case 5:case"end":return r.stop()}}),r)})))()}ajoutQuartier(e){return Object(ae.a)(te.a.mark((function t(){var a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.post("/quartiers",e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}miseajourQuartier(e){return Object(ae.a)(te.a.mark((function t(){var a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.put("/quartiers/"+e.id,e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}suppressionQuartier(e){return Object(ae.a)(te.a.mark((function t(){var a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.delete("/quartiers/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"},data:e.id});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}}class oe{getTouslesSoustraitants(e,t,a,r){return Object(ae.a)(te.a.mark((function r(){var o;return te.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e+=1,r.next=3,D.b.get("/soustraitants?itemsPerPage="+t+"&page="+e+"&id="+a);case 3:return o=r.sent,r.abrupt("return",o.data);case 5:case"end":return r.stop()}}),r)})))()}ajoutSoustraitant(e){return Object(ae.a)(te.a.mark((function t(){var a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.post("/soustraitants",e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}miseajourSoustraitant(e){return Object(ae.a)(te.a.mark((function t(){var a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.put("/soustraitants/"+e.id,e);case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}suppressionSoustraitant(e){return Object(ae.a)(te.a.mark((function t(){var a;return te.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,D.b.delete("/soustraitants/"+e.id,{method:"DELETE",herdears:{Accept:"application/json"},data:e.id});case 2:return a=t.sent,t.abrupt("return",a.data);case 4:case"end":return t.stop()}}),t)})))()}}t.default=()=>{var e,t,a,c,u,d;const m={nombredenfants:0,nombredenfantscolarise:0,piecedidentite:"CNI",sexe:"HOMME",locataire:"LOCATAIRE"},p={prospect:m,prospect1:null,titre:"Liste des prospects",tableconfig:{page:0,rowsPerPage:30,recherche:"",filtre:""},pagestate:{mode:"affichage",action:"ajout",affichageTable:!0},alert:{severity:"severity",message:"",open:!1,automaticClose:!1},dialogueSuppressionOuvert:!1,dialoguephoto:{open:!1,fichier:"",titre:"",objet:""}},b=Object(n.useState)(p),v=Object(o.a)(b,2),f=v[0],g=v[1];let E=new s.a,h=new re,j=new oe;const O=Object(l.useQueryClient)(),y={handleFermetureAlerte:()=>{g(Object(r.a)(Object(r.a)({},f),{},{titre:"Liste des prospects",alert:Object(r.a)(Object(r.a)({},f.alert),{},{open:!1}),pagestate:Object(r.a)(Object(r.a)({},f.pagestate),{},{mode:"affichage",affichageTable:!0})}))},handleClickSurSupprimer:e=>{g(Object(r.a)(Object(r.a)({},f),{},{prospect:e,dialogueSuppressionOuvert:!0}))},handleClickSurDetail:e=>{console.log("fermeture de la boit de de dialogue")},handleClickSurEdit:e=>{g(Object(r.a)(Object(r.a)({},f),{},{titre:"Mise \xe0 jour de prospect",prospect:e,pagestate:{mode:"edition",action:"misajour",affichageTable:!1}})),console.log("Edition du prospect..."+e.nom)},handleClicksurNouveau:()=>{g(Object(r.a)(Object(r.a)({},f),{},{prospect:m,titre:"Nouveau prospect ",pagestate:{mode:"edition",action:"ajout",affichageTable:!1}}))},fermerAlerte:()=>{g(Object(r.a)(Object(r.a)({},f),{},{alert:Object(r.a)(Object(r.a)({},f.alert),{},{open:!1})}))},AnnulerEnregistrement:()=>{console.log("Annulation de l'enregistrement"),g(Object(r.a)(Object(r.a)({},f),{},{titre:"Liste des prospects",pagestate:{mode:"affichage",action:"ajout",affichageTable:!0}}))},fermerDialogueSuppression:()=>{g(Object(r.a)(Object(r.a)({},f),{},{dialogueSuppressionOuvert:!1}))},confirmerSuppression:e=>{g(Object(r.a)(Object(r.a)({},f),{},{dialogueSuppressionOuvert:!1})),x.mutate(e)},handleCloseDialoguephoto:()=>{g(Object(r.a)(Object(r.a)({},f),{},{dialoguephoto:Object(r.a)(Object(r.a)({},f.dialoguephoto),{},{open:!1})}))},handledatedatedecreationchange:e=>{g(Object(r.a)(Object(r.a)({},f),{},{prospect:Object(r.a)(Object(r.a)({},f.prospect),{},{datedecreation:e})}))}},w=Object(l.useQuery)(["Prospects",f.tableconfig.page,f.tableconfig.rowsPerPage,f.tableconfig.recherche,f.tableconfig.filtre],()=>E.getTouslesProspects(f.tableconfig.page,f.tableconfig.rowsPerPage,f.tableconfig.recherche,f.tableconfig.filtre),{keepPreviousData:!0}),D=Object(l.useQuery)(["Quartiers",f.tableconfig.page,f.tableconfig.rowsPerPage,f.tableconfig.recherche,f.tableconfig.filtre],()=>h.getTouslesQuartiers(f.tableconfig.page,"1000",f.tableconfig.recherche,f.tableconfig.filtre),{keepPreviousData:!0}),P=Object(l.useQuery)(["Soustraitants",f.tableconfig.page,f.tableconfig.rowsPerPage,f.tableconfig.recherche,f.tableconfig.filtre],()=>j.getTouslesSoustraitants(f.tableconfig.page,f.tableconfig.rowsPerPage,f.tableconfig.recherche,f.tableconfig.filtre),{keepPreviousData:!0}),q=Object(l.useMutation)(E.ajoutProspect,{onSuccess:()=>{O.invalidateQueries("Prospects"),g(Object(r.a)(Object(r.a)({},f),{},{alert:{message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0}}))},onError:()=>{O.invalidateQueries("Prospects"),g(Object(r.a)(Object(r.a)({},f),{},{alert:{message:"Echec lors de l'enregistrement",open:!0,severity:"error",automaticClose:!0}}))}}),R=Object(l.useMutation)(E.miseajourProspect,{onSuccess:()=>{O.invalidateQueries("Prospects"),g(Object(r.a)(Object(r.a)({},f),{},{alert:{message:"Mise \xe0 jour R\xe9ussie...",open:!0,severity:"success",automaticClose:!0}}))},onError:()=>{O.invalidateQueries("Prospects"),g(Object(r.a)(Object(r.a)({},f),{},{alert:{message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0}}))}}),x=Object(l.useMutation)(E.suppressionProspect,{onSuccess:()=>{g(Object(r.a)(Object(r.a)({},f),{},{alert:{message:"Supr\xe9ssion r\xe9ussie",open:!0,severity:"success"}}))},onError:()=>{g({alert:{message:"Echec lors de la supr\xe9ssion",open:!0,severity:"error"}})},onSettled:()=>{O.invalidateQueries("Prospects")}}),C={queryProspects:w,mutationMiseajour:R,mutationAjout:q,mutationSuppression:x,queryQuartiers:D,querySoustraitants:P},L=Z(y),A=S.b().shape({quartier:S.c().required("Le champs Quartier est requis"),sexe:S.c().required("Le champs Sexe est requis"),nom:S.c().required("Le champs Nom est requis"),telephone:S.c().required("Le champs Telephone est requis"),piecedidentite:S.c().required("Le champs Piecedidentite est requis"),numeropiece:S.c().required("Le champs Numeropiece est requis"),telephoneparent:S.c().required("Le champs Telephoneparent est requis"),activitepro:S.c().required("Le champs Activitepro est requis"),revenumensuel:S.a().required("revenumensuel requis").integer("Le revenumensuel doit \xeatre un nombre entier"),soustraitant:S.c().required("Le champs Soustraitant est requis"),age:S.a().required("age requis").positive("Le age doit \xeatre positif").integer("Le age doit \xeatre un nombre entier"),nombredenfants:S.a().integer("Le age doit \xeatre un nombre entier"),nombredenfantscolarise:S.a().integer("Le age doit \xeatre un nombre entier"),montantdeladette:S.a().required("montantdeladette requis").integer("Le montantdeladette doit \xeatre un nombre entier"),situationmatrimoniale:S.c().required("Le champs Situationmatrimoniale est requis"),locataire:S.c().required("Le champs Locataire est requis")}),M=Object($.c)({resolver:Object(_.yupResolver)(A),defaultValues:Object(r.a)(Object(r.a)({},f),{},{prospect:Object(r.a)(Object(r.a)({},f.prospect),{},{nombredenfants:0,nombredenfantscolarise:0,piecedidentite:"CNI",sexe:"HOMME",quartier:null!==(e="/api/quartiers/"+(null===(t=f.prospect)||void 0===t||null===(a=t.quartier)||void 0===a?void 0:a.id))&&void 0!==e?e:"/api/quartiers/1",soustraitant:null!==(c="/api/soustraitants/"+(null===(u=f.prospect)||void 0===u||null===(d=u.soustraitant)||void 0===d?void 0:d.id))&&void 0!==c?c:"/api/soustraitants/1"})})});return i.a.createElement(B,{state:f,fonctions:y,collonnes:L,queries:C,useform:M,onSubmit:e=>{let t=Object(r.a)(Object(r.a)({},f.prospect),e);void 0===f.prospect.id?C.mutationAjout.mutate(Object(r.a)({},t)):C.mutationMiseajour.mutate(Object(r.a)({},t))}})}}}]);