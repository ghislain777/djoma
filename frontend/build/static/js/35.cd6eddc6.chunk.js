(this["webpackJsonpmatx-react-pro"]=this["webpackJsonpmatx-react-pro"]||[]).push([[35],{2315:function(e,t,a){"use strict";a.d(t,"c",(function(){return c})),a.d(t,"e",(function(){return i})),a.d(t,"d",(function(){return u})),a.d(t,"a",(function(){return p})),a.d(t,"f",(function(){return f})),a.d(t,"g",(function(){return h})),a.d(t,"b",(function(){return y}));var r=a(8),n=a.n(r),l=a(19),o=a(17);function c(e,t,a,r){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(n.a.mark((function e(t,a,r,l){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/commandes?itemsPerPage="+a+"&page="+t+"&statut="+r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e,t,a,r,n,l,o){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(n.a.mark((function e(t,a,r,l,c,s,i){var m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/periode/commandes/"+c.id+"?dateinitiale="+s+"&datefinale="+i+"&rowsPerPage="+a+"&page="+t);case 3:return m=e.sent,e.abrupt("return",m.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t,a,r,n,l,o){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(n.a.mark((function e(t,a,r,l,c,s,i){var m;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/periode/chauffeurs/"+c.id+"?dateinitiale="+s+"&datefinale="+i+"&rowsPerPage="+a+"&page="+t);case 3:return m=e.sent,e.abrupt("return",m.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/commandes",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(e){return v.apply(this,arguments)}function v(){return(v=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.put("/commandes/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e){return E.apply(this,arguments)}function E(){return(E=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.delete("/commandes/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(e){return g.apply(this,arguments)}function g(){return(g=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,o.b.post("/commande/"+t.id,t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2321:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i}));var r=a(8),n=a.n(r),l=a(19),o=a(17);function c(e,t,a,r){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(n.a.mark((function e(t,a,r,l){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e,t,a,r){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(n.a.mark((function e(t,a,r,l){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/modedepayements?itemsPerPage="+a+"&page="+t+"&nom="+r+"&actif=1");case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2324:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return p}));var r=a(8),n=a.n(r),l=a(19),o=a(17);function c(e,t,a,r){return s.apply(this,arguments)}function s(){return(s=Object(l.a)(n.a.mark((function e(t,a,r,l){var c;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t+=1,e.next=3,o.b.get("/vehicules?itemsPerPage="+a+"&page="+t+"&marque="+r);case 3:return c=e.sent,e.abrupt("return",c.data);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function i(e){return m.apply(this,arguments)}function m(){return(m=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.post("/vehicules",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e){return d.apply(this,arguments)}function d(){return(d=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.put("/vehicules/"+t.id,t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(e){return b.apply(this,arguments)}function b(){return(b=Object(l.a)(n.a.mark((function e(t){var a;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o.b.delete("/vehicules/"+t.id,{method:"DELETE",herdears:{Accept:"application/json"},data:t.id});case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}},2354:function(e,t,a){"use strict";var r=a(0),n=a(51);t.a=Object(n.a)(r.createElement("path",{d:"M20 8h-3V4H3c-1.1 0-2 .9-2 2v11h2c0 1.66 1.34 3 3 3s3-1.34 3-3h6c0 1.66 1.34 3 3 3s3-1.34 3-3h2v-5l-3-4zM6 18.5c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5zm13.5-9l1.96 2.5H17V9.5h2.5zm-1.5 9c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5z"}),"LocalShipping")},3110:function(e,t,a){"use strict";a.r(t);var r=a(6),n=a(12),l=a(0),o=a.n(l),c=a(229),s=a.n(c),i=a(262),m=a(231),u=a(766),d=a(434),p=a(568),b=a(64),f=a(1241),v=a(1201),h=a(46),E=a(79),y=a(228),g=a(144),j=a(783),x=a(606),O=a(2315),w=a(73),C=a(84),N=a(32),S=a(117),k=a(444),P=a(131),_=a(368),D=(a(369),a(367),a(232)),R=a(2321),B=a(60);const M=E.b().shape({client:E.c().required("Le  client est requis"),modedepayement:E.c().required("Le mode de payement est requis"),adressedepart:E.c().required("Le champs Adresse de d\xe9part est requis"),adressearrivee:E.c().required("Le champs Adresse d arriv\xe9e est requis"),montant:E.a().required("Montant requis").positive("Le mntant doit \xeatre un entier positif").integer("Le montant doit \xeatre un nombre entier")});function A({id:e,lecommande:t,handleFermeture:a,action:c}){var s,i,m,u;const d=Object(N.useQueryClient)(),p=Object(N.useMutation)(O.a,{onSuccess:()=>{d.invalidateQueries("Commandes"),V({message:"Enregistrement r\xe9ussi",open:!0,severity:"success",automaticClose:!0})},onError:()=>{d.invalidateQueries("Commandes"),V({message:"Echec lors de l op\xe9ration",open:!0,severity:"error",automaticClose:!0})}}),f=Object(N.useMutation)(O.f,{onSuccess:()=>{d.invalidateQueries("Commandes"),V({message:"Mise \xe0 jour r\xe9ussie",open:!0,severity:"success",automaticClose:!0})},onError:()=>{d.invalidateQueries("Commandes"),V({message:"Echec lors de la mise \xe0 jour",open:!0,severity:"error",automaticClose:!0})}}),v=Object(N.useQuery)(["Clients",1],()=>Object(D.d)(0,100,"",""),{keepPreviousData:!0}),E=Object(N.useQuery)(["Modedepayements",1],()=>Object(R.b)(0,100,"",""),{keepPreviousData:!0}),A=Object(l.useState)(Object(r.a)(Object(r.a)({},t),{},{executionimmediate:null===(s=null===t||void 0===t?void 0:t.executionimmediate)||void 0===s||s})),L=Object(n.a)(A,2),z=L[0],q=L[1],Q=Object(l.useState)({severity:"severity",message:"",open:!1,automaticClose:!0}),I=Object(n.a)(Q,2),F=I[0],V=I[1],T=Object(w.c)({resolver:Object(y.yupResolver)(M),defaultValues:Object(r.a)(Object(r.a)({},z),{},{client:t?"/api/clients/"+t.client.id:"/api/clients/1",modedepayement:t?"/api/modedepayements/"+t.modedepayement.id:"/api/modedepayements/1",montant:5e3})}),H=T.control,G=T.handleSubmit,J=T.errors,U=(T.reset,e=>{let t=Object(r.a)(Object(r.a)({},z),e);z.id?f.mutate(Object(r.a)({},t)):p.mutate(Object(r.a)({},t))});return o.a.createElement("div",null,o.a.createElement(C.a,{message:F.message,severity:F.severity,open:F.open,handleAlertClose:F.automaticClose?a:()=>V(Object(r.a)(Object(r.a)({},F),{},{open:!1}))}),o.a.createElement("form",{onSubmit:G(U)},o.a.createElement(h.a,{container:!0,spacing:4,direction:"column"},o.a.createElement(h.a,{item:!0},v.isLoading?o.a.createElement(B.a,{message:"chargement des clients..."}):o.a.createElement(P.a,{id:"client",name:"client",label:"Choisir le client",table:"client",control:H,options:v.data["hydra:member"],error:J.client,valeur:null!==(i=null===z||void 0===z?void 0:z.client)&&void 0!==i?i:""})),o.a.createElement(h.a,{item:!0},E.isLoading?o.a.createElement(B.a,{message:"chargement des modes de payement..."}):o.a.createElement(P.a,{id:"modedepayement",name:"modedepayement",label:"Choisir le mode de payement",table:"modedepayement",control:H,options:E.data["hydra:member"],error:J.modedepayement,valeur:null!==(m=null===z||void 0===z?void 0:z.modedepayement)&&void 0!==m?m:""})),o.a.createElement(h.a,{item:!0},o.a.createElement(S.a,{id:"adressedepart",nom:"adressedepart",label:"Adresse de d\xe9part",valeur:null===z||void 0===z?void 0:z.adressedepart,control:H,error:J.adressedepart,multiline:!0,rowsMax:4})),o.a.createElement(h.a,{item:!0},o.a.createElement(S.a,{id:"adressearrivee",nom:"adressearrivee",label:"Adresse d arriv\xe9e",valeur:null===z||void 0===z?void 0:z.adressearrivee,control:H,error:J.adressearrivee,multiline:!0,rowsMax:4})),o.a.createElement(h.a,null,o.a.createElement(_.a,{id:"executionimmediate",nom:"executionimmediate",control:H,coche:Boolean(null!==(u=null===z||void 0===z?void 0:z.executionimmediate)&&void 0!==u?u:""),label:"Ex\xe9cution imm\xe9diate",onChange:e=>{console.log(z),q(Object(r.a)(Object(r.a)({},z),{},{executionimmediate:e}))},changement:e=>{console.log("on a coch\xe9::::"+e),q(Object(r.a)(Object(r.a)({},z),{},{executionimmediate:e}))}})),!z.executionimmediate&&o.a.createElement(h.a,{item:!0},o.a.createElement(k.a,{id:"dateexecution",nom:"dateexecution",label:"date d' ex\xe9cution",valeur:new Date,error:J.dateexecution,control:H})),o.a.createElement(h.a,{item:!0},o.a.createElement(S.a,{id:"montant",nom:"montant",label:"Montant..",valeur:null===z||void 0===z?void 0:z.montant,control:H,error:J.montant})),o.a.createElement(h.a,{item:!0},o.a.createElement(h.a,{container:!0,alignItems:"center",justify:"space-between"},o.a.createElement(h.a,{item:!0},o.a.createElement(g.a,{color:"primary",variant:"contained",type:"submit",onClick:G(U)},f.isLoading||p.isLoading?o.a.createElement(j.a,{color:"inherit"}):o.a.createElement(x.a,null,"send"),o.a.createElement("span",{className:"pl-2 capitalize"},"ajout"===c?o.a.createElement(b.a,null,"Enregistrer"):o.a.createElement(b.a,null,"Mettre \xe0 jour")))),o.a.createElement(h.a,{item:!0},o.a.createElement(g.a,{variant:"outlined",color:"secondary",onClick:function(){a()}},"Annuler")))))))}var L=a(204),z=a(230),q=a(2354),Q=a(300),I=(a(443),a(1192)),F=a(2285),V=a(17),T=a(3),H=a(1198),G=a(26),J=a(110);Object(J.a)(e=>{e.palette,Object(G.a)(e,["palette"]);return{gridCard:{"& .grid__card-overlay":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,opacity:0,transition:"all 250ms ease-in-out",background:"rgba(0, 0, 0, 0.67)","& > div:nth-child(2)":{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:-1}},"& .grid__card-bottom":{"& .email":{display:"none"}},"&:hover":{"& .grid__card-overlay":{opacity:1},"& .grid__card-bottom":{"& .email":{display:"block"},"& .date":{display:"none"}}}}}});var U=a(426),W=a(2192),Y=a(2201),K=a(2303),X=a(224);var Z=({viewMode:e,sliderValue:t,handleSldierChange:a,handleInputChange:r,handleViewChange:n})=>o.a.createElement("div",{className:"flex flex-wrap items-center justify-between"},o.a.createElement("div",{className:"flex items-center"},o.a.createElement(U.a,{onChange:r,InputProps:{startAdornment:o.a.createElement(W.a,{position:"start"},o.a.createElement(x.a,null,"search"))}})),o.a.createElement("div",{className:"flex items-center"},o.a.createElement(Y.a,{xsDown:!0},"grid"===e&&o.a.createElement(K.a,{className:"w-120 mr-4",value:t,min:25,step:null,marks:[{value:25},{value:50},{value:75},{value:100}],onChange:a,"aria-labelledby":"continuous-slider"}),o.a.createElement(X.a,{color:"grid"===e?"primary":"default",onClick:()=>n("grid")},o.a.createElement(x.a,null,"view_comfy"))))),$=a(2302),ee=a(95);const te=Object(J.a)(e=>{e.palette,Object(G.a)(e,["palette"]);return{listCard:{"& .project-image":{height:75,width:100},"& .card__button-group":{display:"none",position:"absolute",top:0,bottom:0,right:0,zIndex:1},"&:hover":{"& .card__button-group":{display:"flex"}}}}});var ae=({list:e=[]})=>{const t=te();return o.a.createElement("div",null,e.map((a,r)=>o.a.createElement(v.a,{className:Object(T.default)({[t.listCard]:!0,"card p-2 relative":!0,"mb-4":r<e.length}),key:a.id,elevation:3},o.a.createElement(h.a,{container:!0,justify:"space-between",alignItems:"center"},o.a.createElement(h.a,{item:!0,md:6},o.a.createElement("div",{className:"flex items-center"},o.a.createElement("img",{className:"project-image w-full",src:a.projectImage,alt:"project"}),o.a.createElement("div",{className:"ml-4"},o.a.createElement("p",{className:"m-0 mb-2"},a.projectName),o.a.createElement("div",{className:"flex"},o.a.createElement("small",{className:"text-muted"},a.date),o.a.createElement("small",{className:"text-muted ml-6"},a.email))))),o.a.createElement(h.a,{item:!0,md:2},o.a.createElement("div",{className:"text-muted flex items-center"},o.a.createElement(x.a,{fontSize:"small"},"chat_bubble_outline"),o.a.createElement("span",{className:"mr-6 ml-1"},a.comment),o.a.createElement(x.a,{fontSize:"small"},"desktop_windows"),o.a.createElement("span",{className:"ml-1"},a.revision))),o.a.createElement(h.a,{item:!0,md:2},o.a.createElement("div",{className:"flex items-center"},o.a.createElement($.a,{src:a.userImage}),o.a.createElement("span",{className:"ml-4"},a.userName))),o.a.createElement(h.a,{item:!0,md:2},o.a.createElement("div",{className:"card__button-group items-center bg-paper"},o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"filter_none"),o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"share"),o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"edit"),o.a.createElement(x.a,{fontSize:"small",className:"mr-4 text-muted cursor-pointer"},"delete")),o.a.createElement("div",{className:"card__drop-menu text-right"},o.a.createElement(Y.a,{smDown:!0},o.a.createElement(ee.p,{menuButton:o.a.createElement(X.a,null,o.a.createElement(x.a,null,"more_horiz"))},o.a.createElement(p.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"filter_none")," ","Duplicate"),o.a.createElement(p.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"share")," ","Share"),o.a.createElement(p.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"edit")," ","Edit"),o.a.createElement(p.a,{className:"flex items-center"},o.a.createElement(x.a,{className:"mr-4"},"delete")," ","Delete")))))))))};const re=Object(J.a)(e=>{e.palette,Object(G.a)(e,["palette"]);return{gridCard:{"& .grid__card-overlay":{position:"absolute",top:0,left:0,right:0,bottom:0,zIndex:2,opacity:0,transition:"all 250ms ease-in-out",background:"rgba(0, 0, 0, 0.67)","& > div:nth-child(2)":{position:"absolute",top:0,bottom:0,right:0,left:0,zIndex:-1}},"& .grid__card-bottom":{"& .email":{display:"none"}},"&:hover":{"& .grid__card-overlay":{opacity:1},"& .grid__card-bottom":{"& .email":{display:"block"},"& .date":{display:"none"}}}}}});var ne=({list:e=[],sliderValue:t,onSelectionChauffeur:a})=>{const r=re();return o.a.createElement("div",null,o.a.createElement(h.a,{container:!0,spacing:2},e.map((e,n)=>{return o.a.createElement(h.a,{item:!0,sm:(l=t,25===l?2:50===l?3:75===l?4:100===l?6:void 0),key:e.chauffeur.id},o.a.createElement(v.a,{className:Object(T.default)("flex-column h-full",r.gridCard),elevation:6},o.a.createElement("div",{className:"grid__card-top text-center relative"},o.a.createElement("img",{className:"block w-full",src:V.f+"/fichiers/photosvehicules/"+e.photo,alt:e.chauffeur.nom+" "+e.chauffeur.prenom}),o.a.createElement("div",{className:"grid__card-overlay flex-column"},o.a.createElement("div",{className:"flex items-center justify-between"},o.a.createElement("div",{className:"flex items-center cursor-pointer text-white"},e.typevehicule.nom+" "+e.marque)),o.a.createElement("div",{className:"flex items-center justify-center"},o.a.createElement(g.a,{variant:"outlined",className:"text-white border-color-white",onClick:()=>a(e.chauffeur.id)},"S\xe9lectionner")))),o.a.createElement("div",{className:"grid__card-bottom text-center py-2"},o.a.createElement("p",{className:"m-0"},e.chauffeur.nom+" "+e.chauffeur.prenom),o.a.createElement("small",{className:"date text-muted"},e.chauffeur.telephone+"("+e.chauffeur.quartier.nom+")"),o.a.createElement("small",{className:"email text-muted"},e.chauffeur.telephone+"("+e.chauffeur.quartier.nom+")"),o.a.createElement("p",{className:"m-0"},e.typevehicule.nom+" / "+e.marque))));var l})))},le=a(137),oe=a(2324);var ce=({onSelectionChauffeur:e})=>{const t=Object(l.useState)([]),a=Object(n.a)(t,2),r=a[0],c=(a[1],Object(l.useState)(25)),s=Object(n.a)(c,2),i=s[0],m=s[1],u=Object(l.useState)([]),d=Object(n.a)(u,2),p=(d[0],d[1]),b=Object(l.useState)("grid"),f=Object(n.a)(b,2),v=f[0],h=f[1],E=Object(l.useMemo)(()=>Object(le.debounce)(e=>{let t=r.filter(t=>t.projectName.toLowerCase().match(e.toLowerCase()));p([...t])},200),[r]),y=(Object(N.useQueryClient)(),Object(N.useQuery)(["Vehicules"],()=>Object(oe.b)(0,1e3,"",""),{keepPreviousData:!0}));return o.a.createElement("div",{className:"list m-sm-30"},o.a.createElement("div",{className:"mb-4"},o.a.createElement(Z,{viewMode:v,handleViewChange:e=>{h(e)},handleInputChange:e=>{let t=e.target.value;E(t)},handleSldierChange:(e,t)=>{m(t)},sliderValue:i})),y.isLoading?o.a.createElement(B.a,{message:"chargement de la liste des chauffeurs"}):o.a.createElement(o.a.Fragment,null,o.a.createElement(Y.a,{xsDown:!0},"list"===v?o.a.createElement(ae,{list:y.data["hydra:member"]}):o.a.createElement(ne,{list:y.data["hydra:member"],sliderValue:i,onSelectionChauffeur:e})),o.a.createElement(Y.a,{smUp:!0},o.a.createElement(ne,{list:y.data["hydra:member"],sliderValue:i}))))};var se=({open:e,onSelectionChauffeur:t,onClickSurAnnuler:a,title:r="S\xe9lectionner le chauffeur"})=>o.a.createElement(H.a,{fullScreen:!0,maxWidth:"xl",open:e},o.a.createElement("div",{className:"p-8 text-center"},o.a.createElement("h4",{className:"capitalize m-0 mb-2"},r),o.a.createElement("p",null,"S\xe9lectionner le chauffeur pour ex\xe9cuter cette commande"),o.a.createElement("div",{className:"flex justify-center pt-2 m--2"},o.a.createElement(g.a,{className:"m-2 rounded hover-bg-secondary px-6",variant:"outlined",color:"secondary",onClick:a},"Abandonner l'op\xe9ration")),o.a.createElement(ce,{onSelectionChauffeur:t}),o.a.createElement("div",{className:"flex justify-center pt-2 m--2"},o.a.createElement(g.a,{className:"m-2 rounded hover-bg-secondary px-6",variant:"outlined",color:"secondary",onClick:a},"Abandonner l'op\xe9ration"))));t.default=()=>{const e=Object(l.useState)({page:0,rowsPerPage:20,recherche:"",filtre:""}),t=Object(n.a)(e,2),a=t[0],c=t[1],E=Object(N.useQueryClient)(),y=Object(N.useQuery)(["Commandes",a.page,a.rowsPerPage,a.recherche,a.filtre],()=>Object(O.c)(a.page,a.rowsPerPage,a.recherche,a.filtre),{keepPreviousData:!0}),g=y.isLoading,j=(y.isFetching,y.isError),x=y.error,w=y.data,S=Object(N.useMutation)(O.g,{onSuccess:()=>{$({message:"Suppr\xe9ssion r\xe9ussi",open:!0,severity:"success"})},onError:()=>{$({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{E.invalidateQueries("Commandes")}}),k=Object(N.useMutation)(O.b,{onSuccess:()=>{$({message:"Op\xe9ration r\xe9ussie",open:!0,severity:"success"})},onError:()=>{$({message:"Echec lors de l op\xe9ration",open:!0,severity:"error"})},onSettled:()=>{E.invalidateQueries("Commandes")}}),P=[{id:1,nom:"Confirm\xe9e"},{id:2,nom:"Annul\xe9e"},{id:3,nom:"Clotur\xe9e"},{id:4,nom:"Nouveau"}],_=Object(l.useState)({open:!1,idChauffeur:null,commandeEnCours:0}),D=Object(n.a)(_,2),R=D[0],M=D[1],V=Object(l.useState)(null),H=Object(n.a)(V,2),G=H[0],J=(H[1],Object(l.useState)({mode:"affichage",action:"ajout",affichageTable:!0})),U=Object(n.a)(J,2),W=U[0],Y=U[1],K=Object(l.useState)({severity:"severity",message:"",open:!1,handleCloseAlert:()=>ie()}),X=Object(n.a)(K,2),Z=X[0],$=X[1],ee=Object(l.useState)("Liste des commandes"),te=Object(n.a)(ee,2),ae=te[0],re=te[1],ne=Object(l.useState)(!1),le=Object(n.a)(ne,2),oe=le[0],ce=le[1],ie=()=>{$(Object(r.a)(Object(r.a)({},C.a),{},{open:!1}))},me=[{name:"id",label:"ID",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(o.a.Fragment,null,"id: ",e," ","Colis"==t.rowData[5].nom?o.a.createElement(o.a.Fragment,null,o.a.createElement(q.a,null),o.a.createElement("br",null)):"","Colis"==t.rowData[5].nom?o.a.createElement("strong",null,t.rowData[6].nom):"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},Object(I.a)(Object(F.a)(t.rowData[15]),"dd/MM/yyyy hh:mm")))}},{name:"client",label:"Client",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(o.a.Fragment,null,e.nom+" "+e.prenom,o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},e.telephone))}},{name:"quartierdedepart",label:"Depart",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return o.a.createElement(o.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},t.rowData[10]))}}},{name:"quartierdarrivee",label:"Arriv\xe9e",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r;return o.a.createElement(o.a.Fragment,null,null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"",o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},t.rowData[11]))}}},{name:"chauffeur",label:"Chauffeur",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>{var r,n,l;return o.a.createElement(o.a.Fragment,null,(null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:"")+" "+(null!==(n=null===e||void 0===e?void 0:e.prenom)&&void 0!==n?n:""),o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},null!==(l=null===e||void 0===e?void 0:e.telephone)&&void 0!==l?l:""))}}},{name:"typedecourse",label:"Type de course",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{switch(e.id){case 1:return e.nom;case 2:return o.a.createElement("span",null," ",e.nom,": ",o.a.createElement("br",null)," ",o.a.createElement("strong",null,t.rowData[6].nom)," ")}}}},{name:"typedecoli",label:"Type de colis",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>{var r;return null!==(r=null===e||void 0===e?void 0:e.nom)&&void 0!==r?r:""}}},{name:"traitepar",label:"trait\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissepar",label:"Encaiss\xe9 par",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"modedepayement",label:"Mode de payement",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"adressedepart",label:"Adresse de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"adressearrivee",label:"Adresse d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsdepart",label:"Position GPS de d\xe9part",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"gpsarrivee",label:"Position GPS d arriv\xe9e",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"statut",label:"Statut",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement("small",{className:Object(T.default)({"border-radius-4  text-white px-2 py-2px":!0,"bg-primary":"Nouveau"===e,"bg-light-green":"En cours d'ex\xe9cution"===e,"bg-error":"Annul\xe9e"===e,"bg-secondary":"Confirm\xe9e"===e,"bg-green":"Clotur\xe9e"===e,"bg-gray":"Trait\xe9e"===e})},e)}},{name:"datecommande",label:"Date de la commande",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>Object(I.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"executionimmediate",label:"Execution immediate",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(u.a,{checked:e})}},{name:"dateexecution",label:"Date d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>Object(I.a)(Date.parse(e),"dd/MM/yyyy \xe0 HH:mm")}},{name:"traitele",label:"Trait\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datedebutexecution",label:"D\xe9but d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"datefinexecution",label:"Fin d ex\xe9cution",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"encaissele",label:"Encaiss\xe9 le",options:{filter:!1,sort:!1,display:!1,customBodyRender:(e,t,a)=>e}},{name:"montant",label:"montant",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>e}},{name:"recepteurducolis",label:"Recepteur du colis",options:{filter:!1,sort:!1,display:!0,customBodyRender:(e,t,a)=>o.a.createElement(o.a.Fragment,null,e,o.a.createElement("br",null),o.a.createElement("small",{className:"text-muted"},t.rowData[24]))}},{name:"telephonerecepteur",label:"T\xe9l\xe9phone du recepteur de colis",options:{filter:!1,sort:!1,display:"excluded",customBodyRender:(e,t,a)=>e}},{name:"action",label:"Actions",options:{filter:!1,display:"excluded",sort:!1,customBodyRender:(e,t,a)=>o.a.createElement("div",null,o.a.createElement(i.a,null,o.a.createElement(d.a,{disabled:!0,value:t.rowData[10],id:t.rowData[0],name:t.rowData[0],variant:"outlined",onChange:e=>((e,t)=>{let a=e.target.value,n=t;"Confirm\xe9e"!=a?k.mutate({id:n,chauffeur:2,operation:a}):M(Object(r.a)(Object(r.a)({},R),{},{open:!0,commandeEnCours:n}))})(e,t.rowData[0])},P.map(e=>o.a.createElement(p.a,{key:e.id,value:e.nom},e.nom)))))}}];return o.a.createElement("div",{className:"m-sm-30"},o.a.createElement(C.a,{message:Z.message,severity:Z.severity,open:Z.open,handleAlertClose:ie}),o.a.createElement(se,{open:R.open,onSelectionChauffeur:e=>{M(Object(r.a)(Object(r.a)({},R),{},{open:!1,idChauffeur:e})),k.mutate({id:R.commandeEnCours,chauffeur:e,operation:"Confirm\xe9e"})},onClickSurAnnuler:()=>{M(Object(r.a)(Object(r.a)({},R),{},{open:!1}))}}),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(L.a,{routeSegments:[{name:"Liste des commandes"}]})),o.a.createElement("div",{className:"mb-sm-30"},o.a.createElement(b.a,{variant:"h4"},ae)),"affichage"===W.mode?o.a.createElement(f.a,{in:W.affichageTable,direction:"right",unmountOnExit:!0},o.a.createElement("div",null,g?o.a.createElement(B.a,{message:"Chargement des donn\xe9es",type:"info"}):j?o.a.createElement(B.a,{message:"Erreur lors du chargement des donn\xe9es::"+x,type:"error"}):o.a.createElement(Q.a,{tag:"div",blocking:!1},o.a.createElement(s.a,{title:ae,data:w["hydra:member"],columns:me,options:Object(r.a)(Object(r.a)({},m.a),{},{serverSide:!0,count:w["hydra:totalItems"],rowsPerPageOptions:[20,30,50],rowsPerPage:a.rowsPerPage,onChangePage:e=>(e=>{c(Object(r.a)(Object(r.a)({},a),{},{page:e})),E.invalidateQueries("Commandes")})(e),onChangeRowsPerPage:e=>(e=>{c(Object(r.a)(Object(r.a)({},a),{},{rowsPerPage:e})),console.log("statutbre de ligne par page:"+e),E.invalidateQueries("Commandes")})(e),onSearchChange:e=>(e=>{var t;c(Object(r.a)(Object(r.a)({},a),{},{recherche:null!==e&&void 0!==e?e:""})),console.log(null!==(t="texte a chercher"+e)&&void 0!==t?t:""),E.invalidateQueries("Commandes")})(e),onFilterChange:()=>{console.log("le filtre a chang\xe9")}})})),o.a.createElement(v.a,{className:"w-full overflow-auto",elevation:8},o.a.createElement(z.a,{open:oe,onConfirmDialogClose:()=>{ce(!1)},onYesClick:()=>{ce(!1),S.mutate(G)},text:"Confirmez la suppression de "+(null===G||void 0===G?void 0:G.name)})))):o.a.createElement(h.a,{container:!0,spacing:6,alignContent:"center",justify:"center"},o.a.createElement(h.a,{item:!0,lg:6,md:6,sm:12,xs:12},o.a.createElement(v.a,{className:"px-6 pt-2 pb-4"},o.a.createElement(A,{action:W.action,lecommande:G,handleFermeture:()=>{Y({mode:"affichage",action:"nouveau",affichageTable:!0}),re("Liste des commandes")}})))))}}}]);